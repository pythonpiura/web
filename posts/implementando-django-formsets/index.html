<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Implementando Django Formsets | Python Piura</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://pythonpiura.org/posts/implementando-django-formsets/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Comunidad Python Piura">
<link rel="prev" href="../creando-nuestro-primer-proyecto/" title="Creando Nuestro Primer Proyecto" type="text/html">
<meta property="og:site_name" content="Python Piura">
<meta property="og:title" content="Implementando Django Formsets">
<meta property="og:url" content="http://pythonpiura.org/posts/implementando-django-formsets/">
<meta property="og:description" content="En esta oportunidad vamos a trabajar con los formsets de Django que son muy interesantes y pueden ser de mucha ayuda cuando tenemos múltiples filas con detalles a rellenar, como por ejemplo los detall">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-10-18T19:03:29-05:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Mostrar navegación</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://pythonpiura.org/">

                <span id="blog-title">Python Piura</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../blog">Blog</a>
                </li>
<li>
<a href="../../eventos">Eventos</a>
                </li>
<li>
<a href="../../recursos">Recursos</a>
                </li>
<li>
<a href="../../contactenos">Contáctenos</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.rst" id="sourcelink">Código fuente</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Implementando Django Formsets</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2017-10-18T19:03:29-05:00" itemprop="datePublished" title="2017-10-18 19:03">2017-10-18 19:03</time></a></p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/implementando-django-formsets.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.rst" id="sourcelink">Código fuente</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>En esta oportunidad vamos a trabajar con los formsets de Django que son muy interesantes y pueden ser de mucha ayuda cuando tenemos múltiples filas con detalles a rellenar, como por ejemplo los detalles de una compra. Vamos a seguir utilizando el proyecto llamado modales que hemos venido usando en posts anteriores y que ya tiene varios modelos listos para ser usados:</p>
<p>Vamos a crear un nuevo modelo llamado compra:</p>
<pre class="code python"><a name="rest_code_ad0e5a7029b44c6c8bfb4beb91960339-1"></a><span class="k">class</span> <span class="nc">Compra</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a name="rest_code_ad0e5a7029b44c6c8bfb4beb91960339-2"></a>    <span class="n">proveedor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Proveedor</span><span class="p">)</span>
<a name="rest_code_ad0e5a7029b44c6c8bfb4beb91960339-3"></a>    <span class="n">fecha</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<p>Como podemos ver este modelo Compra tiene dos atributos proveedor, donde se utiliza el modelo Proveedor que ya hemos usado, y fecha, que se asigna automáticamente la fecha actual.</p>
<p>También creamos el modelo DetalleCompra:</p>
<pre class="code python"><a name="rest_code_4b997c299304464a93cb88bc5d3247af-1"></a><span class="k">class</span> <span class="nc">DetalleCompra</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a name="rest_code_4b997c299304464a93cb88bc5d3247af-2"></a>    <span class="n">compra</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Compra</span><span class="p">)</span>
<a name="rest_code_4b997c299304464a93cb88bc5d3247af-3"></a>    <span class="n">producto</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Producto</span><span class="p">)</span>
<a name="rest_code_4b997c299304464a93cb88bc5d3247af-4"></a>    <span class="n">cantidad</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a name="rest_code_4b997c299304464a93cb88bc5d3247af-5"></a>    <span class="n">precio_compra</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre>
<p>Este modelo tiene el detalle de la compra con los siguientes atributos: "compra" que referencia al modelo "cabecera"(por llamarlo de alguna manera), "producto" que hace la referencia al modelo Producto, cantidad para guardar la cantidad del producto comprado y el precio_compra para guardar el precio del producto en esa compra.</p>
<p>Igual que con los ejemplos anteriores primero vamos a mostrar un listado de las compras para ello necesitamos una vista, un template y su correspondiente url.</p>
<p>Creamos la clase ListadoCompras basada en la clase ListView:</p>
<pre class="code python"><a name="rest_code_9c5fb7fb71b84edc8a870ac3a279e948-1"></a><span class="k">class</span> <span class="nc">ListadoCompras</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
<a name="rest_code_9c5fb7fb71b84edc8a870ac3a279e948-2"></a>    <span class="n">model</span> <span class="o">=</span> <span class="n">Compra</span>
<a name="rest_code_9c5fb7fb71b84edc8a870ac3a279e948-3"></a>    <span class="n">template_name</span> <span class="o">=</span> <span class="s1">'compras.html'</span>
<a name="rest_code_9c5fb7fb71b84edc8a870ac3a279e948-4"></a>    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s1">'compras'</span>
</pre>
<p>Creamos la plantilla compras.html:</p>
<pre class="code html"><a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-1"></a>{% extends "base.html" %}
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-2"></a>{% block cuerpo %}
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-3"></a><span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Compras<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-4"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-5"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-10"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-6"></a>                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"{% url 'productos:crear_compra' %}"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-7"></a>                        Crear
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-8"></a>                <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-9"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-10"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-11"></a><span class="p">&lt;</span><span class="nt">hr</span><span class="p">/&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-12"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-13"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-14"></a>                <span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"tabla"</span> <span class="na">class</span><span class="o">=</span><span class="s">"display"</span> <span class="na">cellspacing</span><span class="o">=</span><span class="s">"0"</span> <span class="na">width</span><span class="o">=</span><span class="s">"100%"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-15"></a>                        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-16"></a>                                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-17"></a>                                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>PROVEEDOR<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-18"></a>                                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>FECHA<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-19"></a>                                        <span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>ACCIONES<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-20"></a>                                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-21"></a>                        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-22"></a>                        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-23"></a>                        {% for compra in compras %}
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-24"></a>                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-25"></a>                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ compra.proveedor }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-26"></a>                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ compra.fecha }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-27"></a>                    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-28"></a>                        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-29"></a>                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"glyphicon glyphicon-eye-open"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-30"></a>                        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-31"></a>                        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"#"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn"</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-32"></a>                            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"glyphicon glyphicon-edit"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-33"></a>                        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-34"></a>                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-35"></a>                                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-36"></a>                        {% endfor %}
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-37"></a>                        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-38"></a>                <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-39"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-40"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-41"></a>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-42"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-43"></a>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-44"></a><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-45"></a><span class="p">{</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-46"></a>    <span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tabla'</span><span class="p">).</span><span class="nx">dataTable</span><span class="p">(</span> <span class="p">{</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-47"></a>        <span class="s2">"language"</span><span class="o">:</span> <span class="p">{</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-48"></a>                <span class="nx">url</span><span class="o">:</span> <span class="s2">"/static/localizacion/es_ES.json"</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-49"></a>        <span class="p">}</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-50"></a>    <span class="p">}</span> <span class="p">);</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-51"></a><span class="p">});</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-52"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_3e8f761ac4f64c4cb69461f4ef63b5d8-53"></a>{% endblock cuerpo %}
</pre>
<p>Añadimos la url correspondiente, nótese que también se usa en esa plantilla la url "productos:crear_compra" por lo que debemos incluirla y crear una clase vacia para no tener problemas:</p>
<pre class="code python"><a name="rest_code_64addd513d77491d84706ff945c20df5-1"></a><span class="k">class</span> <span class="nc">CrearCompra</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
<a name="rest_code_64addd513d77491d84706ff945c20df5-2"></a>        <span class="k">pass</span>
</pre>
<p>Ahora editamos el archivo urls.py:</p>
<pre class="code python"><a name="rest_code_5ea1a95d283d409882977f91307ecb6b-1"></a><span class="kn">from</span> <span class="nn">productos.views</span> <span class="kn">import</span> <span class="n">ListadoCompras</span><span class="p">,</span> <span class="n">CrearCompra</span>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-2"></a>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-3"></a><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-4"></a>        <span class="o">...</span>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-5"></a>        <span class="n">url</span><span class="p">(</span><span class="s1">r'^compras/$'</span><span class="p">,</span> <span class="n">ListadoCompras</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"listado_compras"</span><span class="p">),</span>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-6"></a>        <span class="n">url</span><span class="p">(</span><span class="s1">r'^crear_compra/$'</span><span class="p">,</span> <span class="n">CrearCompra</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"crear_compra"</span><span class="p">),</span>
<a name="rest_code_5ea1a95d283d409882977f91307ecb6b-7"></a><span class="p">]</span>
</pre>
<p>Si en el navegador ponemos la url <a class="reference external" href="http://localhost:8000/compras/">http://localhost:8000/compras/</a> nos debe aparecer la siguiente pantalla:</p>
<img alt="/images/blog/listado_compras.png" src="../../images/blog/listado_compras.png"><p>Editamos el archivo forms.py para crear los formularios que necesitamos.</p>
<p>Creamos el formulario para la compra usando un ModelForm y con el campo proveedor:</p>
<pre class="code python"><a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-1"></a><span class="k">class</span> <span class="nc">CompraForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-2"></a>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-3"></a>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-4"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">Compra</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-5"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'proveedor'</span><span class="p">]</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-6"></a>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-7"></a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-8"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">CompraForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-9"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">):</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-10"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-11"></a>                <span class="s1">'class'</span><span class="p">:</span> <span class="s1">'form-control'</span>
<a name="rest_code_2fc916ca1d5b41e1b9c5e79b416a625b-12"></a>            <span class="p">})</span>
</pre>
<p>Creamos nuestro formulario del Detalle de la compra usando también un ModelForm y con los campos producto, cantidad y precio_compra:</p>
<pre class="code python"><a name="rest_code_2a96c4de12424344bb81467092be922d-1"></a><span class="k">class</span> <span class="nc">DetalleCompraForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-2"></a>
<a name="rest_code_2a96c4de12424344bb81467092be922d-3"></a>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-4"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">DetalleCompra</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-5"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'producto'</span><span class="p">,</span><span class="s1">'cantidad'</span><span class="p">,</span><span class="s1">'precio_compra'</span><span class="p">]</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-6"></a>
<a name="rest_code_2a96c4de12424344bb81467092be922d-7"></a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-8"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">DetalleCompraForm</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-9"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">):</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-10"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-11"></a>                <span class="s1">'class'</span><span class="p">:</span> <span class="s1">'form-control'</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-12"></a>            <span class="p">})</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-13"></a>
<a name="rest_code_2a96c4de12424344bb81467092be922d-14"></a>    <span class="k">def</span> <span class="nf">clean_cantidad</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-15"></a>        <span class="n">cantidad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">'cantidad'</span><span class="p">]</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-16"></a>        <span class="k">if</span> <span class="n">cantidad</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-17"></a>            <span class="k">raise</span> <span class="n">forms</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">"Debe ingresar una cantidad valida"</span><span class="p">)</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-18"></a>        <span class="k">return</span> <span class="n">cantidad</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-19"></a>
<a name="rest_code_2a96c4de12424344bb81467092be922d-20"></a>    <span class="k">def</span> <span class="nf">clean_precio_compra</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-21"></a>        <span class="n">precio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s1">'precio_compra'</span><span class="p">]</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-22"></a>        <span class="k">if</span> <span class="n">precio</span> <span class="o">==</span> <span class="s1">''</span><span class="p">:</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-23"></a>            <span class="k">raise</span> <span class="n">forms</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">(</span><span class="s2">"Debe ingresar un precio valido"</span><span class="p">)</span>
<a name="rest_code_2a96c4de12424344bb81467092be922d-24"></a>        <span class="k">return</span> <span class="n">precio</span>
</pre>
<p>Nótese que hemos creados dos métodos "clean" para hacer las validaciones correspondientes tanto de cantidad como de precio_compra.</p>
<p>Ahora si vamos a crear un formset en linea, estos son una pequeña capa de abstracción que simplifica trabajar con objetos relacionados a través de una clave foránea:</p>
<pre class="code python"><a name="rest_code_151afdc6e3f14f3e9ed4a18d1bcefa5f-1"></a><span class="kn">from</span> <span class="nn">django.forms.models</span> <span class="kn">import</span> <span class="n">inlineformset_factory</span>
<a name="rest_code_151afdc6e3f14f3e9ed4a18d1bcefa5f-2"></a>
<a name="rest_code_151afdc6e3f14f3e9ed4a18d1bcefa5f-3"></a><span class="n">DetalleCompraFormSet</span> <span class="o">=</span> <span class="n">inlineformset_factory</span><span class="p">(</span><span class="n">Compra</span><span class="p">,</span> <span class="n">DetalleCompra</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">DetalleCompraForm</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre>
<p>Para hacerlo llamamos al método inlineformset_factory que usa a su vez al método modelformset_factory() pero con el argumento para borrar can_delete=True. Este método tiene como argumentos el modelo foráneo Compra, el modelo DetalleCompra que aparecerá en cada una de las filas, el formulario DetalleCompraForm que se corresponde con el modelo DetalleCompra y el parámetro extra que indica que aparecerán por defecto 4 filas.</p>
<p>Modificamos la vista CrearCompra para poder utilizar los formularios, para ello editamos el archivo views.py:</p>
<pre class="code python"><a name="rest_code_8573dc10330249888568038f76ee5714-1"></a><span class="kn">from</span> <span class="nn">productos.forms</span> <span class="kn">import</span> <span class="n">CompraForm</span><span class="p">,</span> <span class="n">DetalleCompraFormSet</span>
<a name="rest_code_8573dc10330249888568038f76ee5714-2"></a>
<a name="rest_code_8573dc10330249888568038f76ee5714-3"></a><span class="k">class</span> <span class="nc">CrearCompra</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
<a name="rest_code_8573dc10330249888568038f76ee5714-4"></a>    <span class="n">model</span> <span class="o">=</span> <span class="n">Compra</span>
<a name="rest_code_8573dc10330249888568038f76ee5714-5"></a>    <span class="n">template_name</span> <span class="o">=</span> <span class="s1">'compra.html'</span>
<a name="rest_code_8573dc10330249888568038f76ee5714-6"></a>    <span class="n">form_class</span> <span class="o">=</span> <span class="n">CompraForm</span>
<a name="rest_code_8573dc10330249888568038f76ee5714-7"></a>    <span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s1">'productos:listado_compras'</span><span class="p">)</span>
</pre>
<p>En esta primera parte tenemos una clase basada en CreateView para facilitarnos la vida, con el modelo Compra, la plantilla 'compra.html' y el formulario CompraForm, el atributo success_url indica la dirección donde se va a retornar una vez que la creación del objeto haya sido concretada con éxito.</p>
<p>A continuación pasamos a describir el método get que va a ser necesario para mostrar el formulario cuando se llama a la url, vamos a explicar cada una de las lineas con comentarios:</p>
<pre class="code python"><a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-1"></a><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-2"></a>    <span class="sd">"""Primero ponemos nuestro object como nulo, se debe tener en</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-3"></a><span class="sd">    cuenta que object se usa en la clase CreateView para crear el objeto"""</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">None</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-5"></a>    <span class="c1">#Instanciamos el formulario de la Compra que declaramos en la variable form_class</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-6"></a>    <span class="n">form_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-7"></a>    <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="n">form_class</span><span class="p">)</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-8"></a>    <span class="c1">#Instanciamos el formset</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-9"></a>    <span class="n">detalle_orden_compra_formset</span><span class="o">=</span><span class="n">DetalleCompraFormSet</span><span class="p">()</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-10"></a>    <span class="c1">#Renderizamos el formulario de la compra y el formset</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-11"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">,</span>
<a name="rest_code_e957a53d9c6f44caa4c95b145cf0d43f-12"></a>                                                         <span class="n">detalle_compra_form_set</span><span class="o">=</span><span class="n">detalle_orden_compra_formset</span><span class="p">))</span>
</pre>
<p>Es necesario ahora crear un método post para recibir el contenido cuando se guarde:</p>
<pre class="code python"><a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-1"></a><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-2"></a>        <span class="c1">#Obtenemos nuevamente la instancia del formulario de Compras</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-3"></a>    <span class="n">form_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-4"></a>    <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="n">form_class</span><span class="p">)</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-5"></a>    <span class="c1">#Obtenemos el formset pero ya con lo que se le pasa en el POST</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-6"></a>    <span class="n">detalle_compra_form_set</span> <span class="o">=</span> <span class="n">DetalleCompraFormSet</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">)</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-7"></a>    <span class="sd">"""Llamamos a los métodos para validar el formulario de Compra y el formset, si son válidos ambos se llama al método</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-8"></a><span class="sd">    form_valid o en caso contrario se llama al método form_invalid"""</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-9"></a>    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span> <span class="ow">and</span> <span class="n">detalle_compra_form_set</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-10"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">detalle_compra_form_set</span><span class="p">)</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-11"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-12"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">detalle_compra_form_set</span><span class="p">)</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-13"></a>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-14"></a><span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">detalle_compra_form_set</span><span class="p">):</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-15"></a>        <span class="c1">#Aquí ya guardamos el object de acuerdo a los valores del formulario de Compra</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-16"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-17"></a>    <span class="c1">#Utilizamos el atributo instance del formset para asignarle el valor del objeto Compra creado y que nos indica el modelo Foráneo</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-18"></a>    <span class="n">detalle_compra_form_set</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-19"></a>    <span class="c1">#Finalmente guardamos el formset para que tome los valores que tiene</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-20"></a>    <span class="n">detalle_compra_form_set</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-21"></a>    <span class="c1">#Redireccionamos a la ventana del listado de compras</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-22"></a>    <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">success_url</span><span class="p">)</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-23"></a>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-24"></a><span class="k">def</span> <span class="nf">form_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">detalle_compra_form_set</span><span class="p">):</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-25"></a>        <span class="c1">#Si es inválido el form de Compra o el formset renderizamos los errores</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-26"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">,</span>
<a name="rest_code_6a6eaeb1d1a34692b887ae35a1220a1f-27"></a>                                                         <span class="n">detalle_compra_form_set</span> <span class="o">=</span> <span class="n">detalle_compra_form_set</span><span class="p">))</span>
</pre>
<p>Creamos el template para la compra en el archivo "compra.html":</p>
<pre class="code html"><a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-1"></a>{% extends "base.html" %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-2"></a>{% block cuerpo %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-3"></a>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-4"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">role</span><span class="o">=</span><span class="s">"form"</span> <span class="na">action</span><span class="o">=</span><span class="s">"{% url 'productos:crear_compra' %}"</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-5"></a>        <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Crear Compra<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-6"></a>        {% csrf_token %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-7"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel panel-default"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-8"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-body"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-9"></a>                        {{ form.as_p }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-10"></a>                        {{ detalle_compra_form_set.management_form }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-11"></a>                        {% for detalle_compra_form in detalle_compra_form_set %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-12"></a>                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-13"></a>                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-14"></a>                                                <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Producto<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-15"></a>                                                {% if detalle_compra_form.producto.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-16"></a>                                                        {% for error in detalle_compra_form.producto.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-17"></a>                                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-18"></a>                                                                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-19"></a>                                                                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-20"></a>                                                                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-21"></a>                                                                <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-22"></a>                                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-23"></a>                                                        {% endfor %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-24"></a>                                                {% endif %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-25"></a>                                                {{ detalle_compra_form.producto }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-26"></a>                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-27"></a>                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-28"></a>                                                <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Cantidad<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-29"></a>                                                {% if detalle_compra_form.cantidad.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-30"></a>                                                        {% for error in detalle_compra_form.cantidad.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-31"></a>                                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-32"></a>                                                                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-33"></a>                                                                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-34"></a>                                                                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-35"></a>                                                                <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-36"></a>                                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-37"></a>                                                        {% endfor %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-38"></a>                                                {% endif %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-39"></a>                                                {{ detalle_compra_form.cantidad }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-40"></a>                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-41"></a>                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-42"></a>                                                <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Precio<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-43"></a>                                                {% if detalle_compra_form.precio_compra.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-44"></a>                                                        {% for error in detalle_compra_form.precio_compra.errors %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-45"></a>                                                        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-46"></a>                                                                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-47"></a>                                                                        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-48"></a>                                                                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-49"></a>                                                                <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-50"></a>                                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-51"></a>                                                        {% endfor %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-52"></a>                                                {% endif %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-53"></a>                                                {{ detalle_compra_form.precio_compra }}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-54"></a>                                        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-55"></a>                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-56"></a>                        {% endfor %}
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-57"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-58"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-59"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12 text-right"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-60"></a>                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span> <span class="na">name</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Guardar"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-61"></a>                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-default"</span> <span class="na">href</span><span class="o">=</span><span class="s">"{% url 'productos:listado_compras' %}"</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-62"></a>                        Cancelar
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-63"></a>                <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-64"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-65"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<a name="rest_code_3f14ddd6ba40427aa5d1824c817c23b5-66"></a>{% endblock cuerpo %}
</pre>
<p>Análicemos parte por parte esta plantilla:</p>
<p>Primero renderizamos el formulario de la compra:</p>
<pre class="code html"><a name="rest_code_4063de90df1b41b2b74b185f49c91844-1"></a>{{ form.as_p }}
</pre>
<p>Luego renderizamos el management_form del formset que nos indica varios parámetros importantes del formset tales como el total de formularios dentro del formset y la cantidad mínima y máxima de formularios que se pueden crear en el formset:</p>
<pre class="code html"><a name="rest_code_804377feb6ea4c47ac5ba26b0def950c-1"></a>{{ detalle_compra_form_set.management_form }}
</pre>
<p>Hacemos un recorrido al formset renderizando form por form con cada uno de sus campos y sus respectivos errores:</p>
<pre class="code html"><a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-1"></a>{% for detalle_compra_form in detalle_compra_form_set %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-2"></a>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-3"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-4"></a>                        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Producto<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-5"></a>                        {% if detalle_compra_form.producto.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-6"></a>                                {% for error in detalle_compra_form.producto.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-7"></a>                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-8"></a>                                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-9"></a>                                                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-10"></a>                                        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-11"></a>                                        <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-12"></a>                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-13"></a>                                {% endfor %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-14"></a>                        {% endif %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-15"></a>                        {{ detalle_compra_form.producto }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-16"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-17"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-18"></a>                        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Cantidad<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-19"></a>                        {% if detalle_compra_form.cantidad.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-20"></a>                                {% for error in detalle_compra_form.cantidad.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-21"></a>                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-22"></a>                                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-23"></a>                                                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-24"></a>                                        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-25"></a>                                        <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-26"></a>                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-27"></a>                                {% endfor %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-28"></a>                        {% endif %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-29"></a>                        {{ detalle_compra_form.cantidad }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-30"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-31"></a>                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-4"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-32"></a>                        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Precio<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-33"></a>                        {% if detalle_compra_form.precio_compra.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-34"></a>                                {% for error in detalle_compra_form.precio_compra.errors %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-35"></a>                                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"alert alert-danger alert-dismissible"</span> <span class="na">role</span><span class="o">=</span><span class="s">"alert"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-36"></a>                                        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span> <span class="na">class</span><span class="o">=</span><span class="s">"close"</span> <span class="na">data-dismiss</span><span class="o">=</span><span class="s">"alert"</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">"Close"</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-37"></a>                                                <span class="p">&lt;</span><span class="nt">span</span> <span class="na">aria-hidden</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span><span class="ni">&amp;times;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-38"></a>                                        <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-39"></a>                                        <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Error: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ error|escape }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-40"></a>                                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-41"></a>                                {% endfor %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-42"></a>                        {% endif %}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-43"></a>                        {{ detalle_compra_form.precio_compra }}
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-44"></a>                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-45"></a>        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3bfe2ced0a5a46768f010c334e056eb6-46"></a>{% endfor %}
</pre>
<p>Finalmente nos debe quedar una imagen para crear compra como la siguiente:</p>
<img alt="/images/blog/crear_compra.png" src="../../images/blog/crear_compra.png"><p>Si llenamos los datos correspondientes:</p>
<img alt="/images/blog/crear_compra_datos.png" src="../../images/blog/crear_compra_datos.png"><p>Cuando le demos click al botón guardar automáticamente nos guarda los elementos y retorna a la ventana con el listado de las compras:</p>
<img alt="/images/blog/listado_compras_datos.png" src="../../images/blog/listado_compras_datos.png"><p>Por ahora no tenemos un detalle de lo guardado pero si lo está haciendo correctamente, en el siguiente post veremos como mostrar los datos guardados en el admin, hasta la pŕoxima.</p>
<p>Saludos.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../creando-nuestro-primer-proyecto/" rel="prev" title="Creando Nuestro Primer Proyecto">Publicación anterior</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comentarios</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="pythonpiura-org",
            disqus_url="http://pythonpiura.org/posts/implementando-django-formsets/",
        disqus_title="Implementando Django Formsets",
        disqus_identifier="cache/posts/implementando-django-formsets.html",
        disqus_config = function () {
            this.language = "es_ES";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="pythonpiura-org";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:pythonpiura@openmailbox.org">Comunidad Python Piura</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script src="../../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8661664653028018",
    enable_page_level_ads: true
  });
</script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76551557-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
