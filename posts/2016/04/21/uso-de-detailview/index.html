<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<base href="http://pythonpiura.org/posts/2016/04/21/uso-de-detailview/">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Uso de DetailView | Python Piura</title>
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../../rss.xml">
<link rel="canonical" href="http://pythonpiura.org/posts/2016/04/21/uso-de-detailview/">
<!--[if lt IE 9]><script src="../../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Comunidad Python Piura">
<link rel="prev" href="../../20/templateview/" title="Uso de TemplateView" type="text/html">
<link rel="next" href="../uso-de-updateview/" title="Uso de UpdateView" type="text/html">
<meta property="og:site_name" content="Python Piura">
<meta property="og:title" content="Uso de DetailView">
<meta property="og:url" content="http://pythonpiura.org/posts/2016/04/21/uso-de-detailview/">
<meta property="og:description" content="Luego de haber visto el uso de TemplateView, CreateView y ListView, estos dos últimos los vimos de pasada casi sin mencionarlos, ahora vamos a agregar un par de nuevas funcionalidades a nuestro proyec">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-04-21T20:48:56-05:00">
<meta property="article:tag" content="Django">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://pythonpiura.org/">

                <span id="blog-title">Python Piura</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../../../blog">Blog</a>
                </li>
<li>
<a href="../../../../../eventos">Eventos</a>
                </li>
<li>
<a href="../../../../../recursos">Recursos</a>
                </li>
<li>
<a href="../../../../../contactenos">Contáctenos</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.src.html" id="sourcelink">Código fuente</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Uso de DetailView</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2016-04-21T20:48:56-05:00" itemprop="datePublished" title="2016-04-21 20:48">2016-04-21 20:48</time></a></p>
            
        <p class="sourceline"><a href="index.src.html" id="sourcelink">Código fuente</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p style="text-align:justify;">Luego de haber visto el uso de TemplateView, CreateView y ListView, estos dos últimos los vimos de pasada casi sin mencionarlos, ahora vamos a agregar un par de nuevas funcionalidades a nuestro proyecto tutorial, para ello empezaremos modificando el archivo personas.html para agregarle un par de enlaces que nos van a permitir editar y ver el detalle de una persona en cuestión, en este post solamente cubriremos la funcionalidad de ver el detalle, posteriormente en otro post nos encargaremos de la funcionalidad de editar a la persona:</p>
<p>[sourcecode language="html"]<br>
{% extends "base.html" %}<br>
{% block cuerpo %}<br>
&lt;div class="row"&gt;<br>
    &lt;div class="col-lg-12"&gt;<br>
        &lt;h1 class="page-header"&gt;Tablas&lt;/h1&gt;<br>
    &lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div class="row"&gt;<br>
	&lt;div class="col-lg-12"&gt;<br>
		&lt;div class="panel panel-info"&gt;<br>
			&lt;div class="panel-heading"&gt;<br>
			    Personas<br>
			&lt;/div&gt;<br>
			&lt;div class="panel-body"&gt;<br>
				&lt;div class=’form-group’&gt;<br>
					&lt;div class="row"&gt;<br>
						&lt;div class="col-lg-10"&gt;	</p>
<p>						&lt;/div&gt;<br>
						&lt;div class="col-lg-1"&gt;<br>
							&lt;a id="crear_detalle" href="{% url ‘personas:reporte_personas_excel’ %}" class="btn btn-info btn-block"&gt;<br>
								&lt;span class="glyphicon glyphicon-list-alt"&gt;&lt;/span&gt;<br>
							&lt;/a&gt;<br>
						&lt;/div&gt;<br>
						&lt;div class="col-lg-1"&gt;<br>
							&lt;a id="crear_detalle" href="{% url ‘personas:crear_persona’ %}" class="btn btn-info btn-block"&gt;<br>
								&lt;span class="glyphicon glyphicon-plus"&gt;&lt;/span&gt;<br>
							&lt;/a&gt;<br>
						&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/div&gt;<br>
				&lt;div class="row"&gt;<br>
					&lt;div class="col-lg-12"&gt;<br>
						&lt;table id="tabla" class="table table-striped table-bordered" cellspacing="0" width="100%"&gt;<br>
							&lt;thead&gt;<br>
								&lt;tr&gt;<br>
									&lt;th class="text-center"&gt;DNI&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;NOMBRE&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;APELLIDO PATERNO&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;APELLIDO MATERNO&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;ACCIONES&lt;/th&gt;<br>
								&lt;/tr&gt;<br>
							&lt;/thead&gt;<br>
							&lt;tbody&gt;<br>
							{% for persona in personas %}<br>
								&lt;tr&gt;<br>
									&lt;td&gt;{{ persona.dni }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.nombre }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.apellido_paterno }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.apellido_materno }}&lt;/td&gt;<br>
									&lt;td class="text-center"&gt;<br>
										&lt;a class="btn btn-small" href="#"&gt;<br>
							                &lt;span class="glyphicon glyphicon-folder-open"&gt;&lt;/span&gt;<br>
							            &lt;/a&gt;<br>
							            &lt;a class="btn btn-small" href="#"&gt;<br>
							                &lt;span class="glyphicon glyphicon-pencil"&gt;&lt;/span&gt;<br>
							            &lt;/a&gt;<br>
							        &lt;/td&gt;<br>
								&lt;/tr&gt;<br>
							{% endfor %}<br>
							&lt;/tbody&gt;<br>
						&lt;/table&gt;<br>
					&lt;/div&gt;<br>
				&lt;/div&gt;<br>
			&lt;/div&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/div&gt;<br>
{% endblock cuerpo %}<br>
{% block js %}<br>
&lt;script&gt;<br>
$(document).ready(function()<br>
{<br>
    var table = $(‘#tabla’).DataTable( {<br>
        "language": {<br>
        	url: "/static/localizacion/es_ES.json"<br>
        }<br>
    } );</p>
<p>    $(‘#tabla tbody’).on( ‘click’, ‘tr’, function()<br>
    {<br>
    	if ($(this).hasClass(‘selected’) )<br>
        {<br>
        	$(this).removeClass(‘selected’);</p>
<p>        }<br>
        else<br>
        {<br>
	        table.$(‘tr.selected’).removeClass(‘selected’);<br>
	        $(this).addClass(‘selected’);<br>
        }<br>
    });   </p>
<p>});<br>
&lt;/script&gt;<br>
{% endblock js %}<br>
[/sourcecode]</p>
<p style="text-align:justify;">Nótese que en la cabecera de la tabla hemos puesto el encabezado acciones y que dentro del cuerpo de la tabla se ha agregado una columna que contiene dos enlaces: uno con el ícono de un libro y otro con el ícono de un lapiz, ambos son, para ver el detalle de la persona y el otro para editarlo.</p>
<p><a href="../../../../../2016/04/tabla_nueva.jpg"><img class="aligncenter wp-image-174" src="https://pythonpiura.files.wordpress.com/2016/04/tabla_nueva.jpg?w=300" alt="tabla_nueva" width="568" height="191"></a></p>
<p style="text-align:justify;">Ahora vamos a implementar la funcionalidad de ver el detalle de la persona, para ello usamos la clase DetailView, esta clase nos simplifica la vida ya que nos permite mostrar el detalle de un modelo en particular, debiendo definir el modelo al que haremos referencia y la plantilla donde se renderizará el contenido:</p>
<p>[sourcecode language="python"]<br>
from django.views.generic.detail import DetailView<br>
class DetallePersona(DetailView):<br>
    model = Persona<br>
    template_name = ‘detalle_persona.html’<br>
[/sourcecode]</p>
<p>Ahora debemos crear la plantilla detalle_persona.html:</p>
<p>[sourcecode language="html"]<br>
{% extends "base.html" %}<br>
{% block cuerpo %}<br>
&lt;div class="row"&gt;<br>
    &lt;div class="col-lg-12"&gt;<br>
        &lt;h1 class="page-header"&gt;Personas&lt;/h1&gt;<br>
    &lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div class="row"&gt;<br>
	&lt;div class="col-lg-12"&gt;<br>
		&lt;div class="panel panel-info"&gt;<br>
			&lt;div class="panel-heading"&gt;<br>
			    Detalle de Persona<br>
			&lt;/div&gt;<br>
			&lt;div class="panel-body"&gt;<br>
				&lt;div class=’form-group’&gt;<br>
					&lt;div class="row"&gt;<br>
						&lt;div class="col-md-12"&gt;<br>
							&lt;label&gt;DNI:&lt;/label&gt;<br>
							&lt;p&gt;{{ object.dni }}&lt;/p&gt;<br>
							&lt;label&gt;NOMBRE:&lt;/label&gt;<br>
							&lt;p&gt;{{ object.nombre }}&lt;/p&gt;<br>
							&lt;label&gt;APELLIDO PATERNO:&lt;/label&gt;<br>
							&lt;p&gt;{{ object.apellido_paterno }}&lt;/p&gt;<br>
							&lt;label&gt;APELLIDO MATERNO: &lt;/label&gt;<br>
							&lt;p&gt;{{ object.apellido_materno }}&lt;/p&gt;<br>
						&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/div&gt;<br>
			&lt;/div&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/div&gt;<br>
{% endblock cuerpo %}<br>
[/sourcecode]</p>
<p>Modificamos el archivo urls.py para crear el url detalle_persona:</p>
<p>[sourcecode language="python"]<br>
from django.conf.urls import patterns, url<br>
from personas.views import Personas, CrearPersona, ReportePersonasExcel,\<br>
    Bienvenida, DetallePersona</p>
<p>urlpatterns = patterns(”,<br>
    url(r’^$’,Bienvenida.as_view(), name="bienvenida"),<br>
    url(r’^personas/$’,Personas.as_view(), name="personas"),<br>
    url(r’^crear_persona/$’,CrearPersona.as_view(), name="crear_persona"),<br>
    url(r’^reporte_personas_excel/$’,ReportePersonasExcel.as_view(), name="reporte_personas_excel"),<br>
    url(r’^detalle_persona/(?P&lt;pk&gt;\d+)/$’, DetallePersona.as_view(), name="detalle_persona"),<br>
)<br>
[/sourcecode]</p>
<p style="text-align:justify;">Ahora hacemos que el enlace con el ícono del libro abierto apunte a nuestra url detalle_persona, debemos tener en cuenta que el enlace debe estar de acuerdo a la definición de la expresión regular en la url, en este caso se le pasa como argumento la primary key que debe ser un conjunto de dígitos:</p>
<p>[sourcecode language="html"]<br>
&lt;a class="btn btn-small" href="{% url ‘personas:detalle_persona’ persona.pk %}"&gt;<br>
	&lt;span class="glyphicon glyphicon-folder-open"&gt;&lt;/span&gt;<br>
&lt;/a&gt;<br>
[/sourcecode]</p>
<p>Ahora cuando hagamos click en el ícono del lápiz nos mostrará lo siguiente:</p>
<p><a href="../../../../../2016/04/detalle_persona.jpg"><img class="alignnone size-medium wp-image-175" src="https://pythonpiura.files.wordpress.com/2016/04/detalle_persona.jpg?w=300" alt="detalle_persona" width="400" height="125"></a></p>
<p>Eso es todo.</p>
<p>Saludos.</p>

    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../../categories/django/" rel="tag">Django</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../20/templateview/" rel="prev" title="Uso de TemplateView">Publicación anterior</a>
            </li>
            <li class="next">
                <a href="../uso-de-updateview/" rel="next" title="Uso de UpdateView">Siguiente publicación</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:pythonpiura@openmailbox.org">Comunidad Python Piura</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../../../../assets/js/all-nocdn.js"></script><script src="../../../../../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
