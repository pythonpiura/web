<html><body><p style="text-align:justify;">En este post vamos a terminar lo que dejamos inconcluso anteriormente, el uso de la clase UpdateView, como ya tenemos listo nuestro archivo personas.html, simplemente vamos a crear la clase y la url necesarias.</p>
<p style="text-align:justify;">views.py</p>
<p>[sourcecode language="python"]<br>
class ModificarPersona(UpdateView):<br>
    #Especificamos que el modelo a utilizar va a ser Persona<br>
    model = Persona<br>
    #Establecemos que la plantilla se llamará modificar persona<br>
    template_name = ‘modificar_persona.html’<br>
    #Determinamos los campos con los que se va a trabajar, esto es obligatorio sino nos saldrá un error<br>
    fields = ['dni','nombre','apellido_paterno','apellido_materno']<br>
    #Con esta linea establecemos que se hará despues que la operación de modificación se complete correctamente<br>
    success_url = reverse_lazy(‘personas:personas’)<br>
[/sourcecode]</p>
<p>Ahora creamos nuestra plantilla modificar_persona.html:</p>
<p>[sourcecode language="html"]<br>
{% extends "base.html" %}<br>
{% block cuerpo %}</p>
<p>&lt;div class="row"&gt;<br>
    &lt;div class="col-lg-12"&gt;<br>
        &lt;h1 class="page-header"&gt;Modificar Persona&lt;/h1&gt;<br>
    &lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div class="row"&gt;<br>
	&lt;div class="col-lg-12"&gt;<br>
		&lt;div class="panel panel-default"&gt;<br>
			&lt;div class="panel-heading"&gt;<br>
			    Por favor ingrese todos los campos necesarios.<br>
			&lt;/div&gt;<br>
			&lt;div class="panel-body"&gt;<br>
				&lt;form role="form" method="post"&gt;<br>
					{% csrf_token %}<br>
					&lt;div class="form-group"&gt;<br>
						{{ form.as_p }}<br>
					&lt;/div&gt;<br>
					&lt;div class=’form-group’&gt;<br>
						&lt;input type="submit" class="btn btn-primary" name="submit" value="Modificar Persona"&gt;<br>
						&lt;button type="reset" class="btn btn-primary" onclick="location.href=’{% url ‘personas:personas’ %}’"&gt;<br>
						    Cancelar<br>
						&lt;/button&gt;<br>
					&lt;/div&gt;<br>
				&lt;/form&gt;<br>
			&lt;/div&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div id="popup"&gt;&lt;/div&gt;<br>
{% endblock cuerpo %}<br>
[/sourcecode]</p>
<p>Ahora le toca el turno a urls.py:</p>
<p>[sourcecode language="python"]<br>
from django.conf.urls import patterns, url<br>
from personas.views import Personas, CrearPersona, ReportePersonasExcel,\<br>
    Bienvenida, DetallePersona, ModificarPersona</p>
<p>urlpatterns = patterns(”,<br>
    url(r’^$’,Bienvenida.as_view(), name="bienvenida"),<br>
    url(r’^personas/$’,Personas.as_view(), name="personas"),<br>
    url(r’^crear_persona/$’,CrearPersona.as_view(), name="crear_persona"),<br>
    url(r’^reporte_personas_excel/$’,ReportePersonasExcel.as_view(), name="reporte_personas_excel"),<br>
    url(r’^detalle_persona/(?P&lt;pk&gt;\d+)/$’, DetallePersona.as_view(), name="detalle_persona"),<br>
    url(r’^modificar_persona/(?P&lt;pk&gt;\d+)/$’,ModificarPersona.as_view(), name="modificar_persona"),<br>
)<br>
[/sourcecode]</p>
<p style="text-align:justify;">Nótese que la última url añadida es la de modificar persona, y funciona de manera parecida al detalle.</p>
<p style="text-align:justify;">Ahora si hacemos que el enlace con el ícono del lapiz apunte a la url de modificar_persona:</p>
<p>personas.html<br>
[sourcecode language="html"]<br>
&lt;a class="btn btn-small" href="{% url ‘personas:modificar_persona’ persona.pk %}"&gt;<br>
	&lt;span class="glyphicon glyphicon-pencil"&gt;&lt;/span&gt;<br>
&lt;/a&gt;<br>
[/sourcecode]<br>
Con lo que tenemos lo siguiente:</p>
<p><a href="/2016/04/modificar_persona.jpg"><img class="alignnone size-medium wp-image-183" src="https://pythonpiura.files.wordpress.com/2016/04/modificar_persona.jpg?w=300" alt="modificar_persona" width="500" height="250"></a></p>
<p>Saludos es todo por hoy.</p>
</body></html>