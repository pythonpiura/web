<html><body><p style="text-align:justify;">Este es un post pequeñito donde vamos a demostrar como mejorar nuestro login que se ve un poco feo, para ello debemos crear un módulo de Python llamado forms.py en nuestra aplicación seguridad:<br>
<a href="/2016/04/forms.jpg"><img class="aligncenter size-full wp-image-211" src="/2016/04/forms.jpg" alt="forms" width="237" height="201"></a><br>
Ahora vamos a crear una clase llamada FormularioLogin que va a heredar de AuthenticationForm, la herencia en Python se determina poniendo la clase de la que se va a heredar entre parentesis en la definición de la clase hija:</p>
<p>forms.py</p>
<p>[sourcecode language="python"]<br>
from django.contrib.auth.forms import AuthenticationForm</p>
<p>class FormularioLogin(AuthenticationForm):<br>
    def __init__(self, *args, **kwargs):<br>
        super(FormularioLogin, self).__init__(*args, **kwargs)<br>
        self.fields['username'].widget.attrs['class'] = ‘form-control’<br>
        self.fields['username'].widget.attrs['placeholder'] = ‘Usuario’<br>
        self.fields['password'].widget.attrs['class'] = ‘form-control’<br>
        self.fields['password'].widget.attrs['placeholder'] = ‘Contraseña’<br>
[/sourcecode]</p>
<p style="text-align:justify;">¿Que cosa hemos hecho aquí?, sencillo hemos sobreescrito el comportamiento de los campos del formulario AuthenticationForm, expliquemos esto: primero se necesita acceder a cada uno de los campos del formulario, estos son ‘username’ y ‘password’, y se accede a ellos a través de la lista “fields”, luego accederemos a los widgets de cada uno de estos campos, el widget es el elemento o etiqueta html que se dibuja en el navegador, en este caso los dos son “input”, al ser elementos html tienen atributos y cada atributo tiene un valor, en este caso vamos a modificar los atributos “class” y “placeholder”, el atributo class establece la clase CSS que se aplica a los estilos del elemento y el atributo placeholder provee una ayuda a los usuarios para indicar que cosa se debe escribir en las cajas de texto. Hemos aplicado la clase <a href="http://librosweb.es/libro/bootstrap_3/capitulo_5/campos_de_formulario.html">form-control</a> de bootstrap, que sirve para mostrar los elementos de un formulario mejor presentados, a ambos elementos y hemos definido la ayuda que aparecerá en cada caja de texto.</p>
<p style="text-align:justify;">Recordemos que en nuestra vista Login el atributo form_class es AuthenticationForm, ahora esto va a cambiar:</p>
<p>views.py</p>
<p>[sourcecode language="python"]<br>
from seguridad.forms import FormularioLogin</p>
<p># Create your views here.<br>
class Login(FormView):<br>
    template_name = ‘login.html’<br>
    form_class = FormularioLogin<br>
    success_url =  reverse_lazy("personas:bienvenida")</p>
<p>    def dispatch(self, request, *args, **kwargs):<br>
        if request.user.is_authenticated():<br>
            return HttpResponseRedirect(self.get_success_url())<br>
        else:<br>
            return super(Login, self).dispatch(request, *args, **kwargs)</p>
<p>    def form_valid(self, form):<br>
        login(self.request, form.get_user())<br>
        return super(Login, self).form_valid(form)<br>
[/sourcecode]</p>
<p>Finalmente tendremos la siguiente presentación:</p>
<p><a href="/2016/04/login_bonito.jpg"><img class="aligncenter wp-image-212" src="https://pythonpiura.files.wordpress.com/2016/04/login_bonito.jpg?w=300" alt="login_bonito" width="519" height="175"></a></p>
<p>¿Mejor, verdad?, eso es todo por hoy.</p>
<p>Saludos.</p>
</body></html>