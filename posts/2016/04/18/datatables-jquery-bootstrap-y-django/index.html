<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<base href="http://pythonpiura.org/posts/2016/04/18/datatables-jquery-bootstrap-y-django/">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DataTables JQuery, Bootstrap y Django | Python Piura</title>
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../../rss.xml">
<link rel="canonical" href="http://pythonpiura.org/posts/2016/04/18/datatables-jquery-bootstrap-y-django/">
<!--[if lt IE 9]><script src="../../../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Comunidad Python Piura">
<link rel="prev" href="../../17/deployando-proyectos-django-en-heroku/" title="Deployando Proyectos Django en Heroku" type="text/html">
<link rel="next" href="../../19/generar-reportes-en-excel-desde-django/" title="Generar Reportes en Excel desde Django" type="text/html">
<meta property="og:site_name" content="Python Piura">
<meta property="og:title" content="DataTables JQuery, Bootstrap y Django">
<meta property="og:url" content="http://pythonpiura.org/posts/2016/04/18/datatables-jquery-bootstrap-y-django/">
<meta property="og:description" content="Muchas veces al querer mostrar un listado o un conjunto de objetos, necesitamos hacer uso de tablas, esto lo podemos trabajar de manera sencilla usando una simple tabla html, pero que pasa cuando quer">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-04-18T22:35:28-05:00">
<meta property="article:tag" content="Django">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://pythonpiura.org/">

                <span id="blog-title">Python Piura</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../../../../blog">Blog</a>
                </li>
<li>
<a href="../../../../../eventos">Eventos</a>
                </li>
<li>
<a href="../../../../../recursos">Recursos</a>
                </li>
<li>
<a href="../../../../../contactenos">Contáctenos</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.src.html" id="sourcelink">Código fuente</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">DataTables JQuery, Bootstrap y Django</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2016-04-18T22:35:28-05:00" itemprop="datePublished" title="2016-04-18 22:35">2016-04-18 22:35</time></a></p>
            
        <p class="sourceline"><a href="index.src.html" id="sourcelink">Código fuente</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p style="text-align:justify;">Muchas veces al querer mostrar un listado o un conjunto de objetos, necesitamos hacer uso de tablas, esto lo podemos trabajar de manera sencilla usando una simple tabla html, pero que pasa cuando queremos tener mayores prestaciones, como búsquedas, ordenamiento paginación, etc. En este caso tenemos que recurrir a elementos mas avanzados, en internet podemos encontrar muchísimas aplicaciones con tablas que nos facilitan la vida, pero en esta oportunidad vamos a trabajar con una herramienta que nos ha parecido muy interesante y que nos ha resultado muy fácil de configurar y además trabaja con JQuery, la aplicación se llama <a href="https://datatables.net/">DataTables </a>y como su página dice es un plugin para JQuery, para empezar a trabajar debemos descargarla desde el siguiente <a href="https://datatables.net/download/download">enlace.</a></p>
<p style="text-align:justify;">Para poder mostrar un sitio web mas o menos presentable vamos a echar mano de Bootstrap, como ya es bien conocido en el mundo del desarrollo web <a href="http://getbootstrap.com/">Bootstrap </a>es un framework que nos facilita el diseño de nuestras aplicaciones, contiene plantillas de diseño con tipografía, formularios, botones, cuadros, menús de navegación y otros elementos de diseño basado en HTML y CSS, así como, extensiones de JavaScript, la última versión la podemos descargar de <a href="https://github.com/twbs/bootstrap/releases/download/v3.3.6/bootstrap-3.3.6-dist.zip">aquí</a>.</p>
<p style="text-align:justify;">Ahora si, vamos a empezar creando nuestro proyecto en django, nosotros utilizamos como IDE Eclipse con pydev, si quieren una guía para configurarlo dense una vuelta por <a href="http://www.pythondiario.com/2013/06/eclipse-y-pydev-configuracion-del-ide.html">aquí</a>. Nuestro proyecto se llamará tutorial, dentro del proyecto vamos a crear la aplicación personas, de tal manera que tengamos la siguiente estructura:</p>
<p><a href="../../../../../2016/04/estructura.jpg" rel="attachment wp-att-143"><img class="alignnone size-full wp-image-143" src="../../../../../2016/04/estructura.jpg" alt="Estructura" width="260" height="257"></a></p>
<p style="text-align:justify;">Ahora vamos a crear una carpeta llamada static en la raiz del proyecto y dentro de ella vamos a crear las carpetas css, js, fonts, images y localizacion.</p>
<p><a href="../../../../../2016/04/estructura21.jpg" rel="attachment wp-att-145"><img class="alignnone size-full wp-image-145" src="../../../../../2016/04/estructura21.jpg" alt="Estructura2" width="264" height="187"></a></p>
<p style="text-align:justify;">Nos toca configurar el archivo settings para que nuestros archivos estáticos se muestren correctamente, agregamos la siguiente linea al final del archivo.</p>
<p>settings.py<br>
[sourcecode language="python"]<br>
STATICFILES_DIRS = (<br>
os.path.join(BASE_DIR, ‘static’),<br>
)<br>
[/sourcecode]</p>
<p style="text-align:justify;">Y ahora como ya tenemos descargados tanto DataTables como Bootstrap los descomprimimos, en DataTables buscamos la carpeta media, aquí encontraremos las carpetas css, images y js, vamos a trabajar de la manera mas sencilla que podamos por lo que no vamos a necesitar todo el contenido de las carpetas antes mencionadas, así que de la carpeta css seleccionamos el archivo jquery.dataTables.min.css y lo copiamos a la carpeta css de nuestro proyecto, de la carpeta js seleccionamos los archivos jquery.js y jquery.dataTables.min.js y los copiamos a la carpeta js de nuestro proyecto,el contenido de la carpeta images si lo copiamos integro dentro de nuestra carpeta images. Lo mismo hacemos con Bootstrap copiamos los archivos bootstrap.min.css y bootstrap.min.css.map a nuestra carpeta css, copiamos todo el contenido de la carpeta fonts a nuestra carpeta fonts y finalmente copiamos el archivo bootstrap.min.js a nuestra carpeta js.<br>
Adicionalmente a esto debemos copiar el contenido del siguiente <a href="https://www.datatables.net/plug-ins/i18n/Spanish">enlace</a> y crear un archivo en la carpeta localización que en este caso le hemos llamado es_ES.json, esto sirve para traducir DataTables al español.</p>
<p style="text-align:justify;">Finalmente tendremos lo siguiente dentro de nuestra carpeta static:</p>
<p><a href="../../../../../2016/04/estructurastatic.jpg" rel="attachment wp-att-146"><img class="alignnone size-medium wp-image-146" src="https://pythonpiura.files.wordpress.com/2016/04/estructurastatic.jpg?w=163" alt="EstructuraStatic" width="163" height="300"></a></p>
<p>Ahora vamos a crear una carpeta llamada templates que va a contener nuestras plantillas html dentro de la aplicación personas. Dentro de esta carpeta creamos un archivo llamado base.html que va a ser la plantilla madre de la que heredarán las demás, este archivo tendrá el siguiente contenido:<br>
[sourcecode language="html"]<br>
{% load staticfiles %}<br>
&lt;!DOCTYPE html&gt;<br>
&lt;html&gt;<br>
	&lt;head&gt;<br>
		Ejemplo Círculo de Programadores de Python Piura<br>
		&lt;link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.min.css" %}"&gt;<br>
		&lt;link rel="stylesheet" type="text/css" href="{% static "css/jquery.dataTables.min.css"  %}"  /&gt;<br>
		&lt;script src="{% static "js/jquery.js" %}"&gt;&lt;/script&gt;<br>
		&lt;script src="{% static "js/bootstrap.min.js" %}"&gt;&lt;/script&gt;<br>
		&lt;script src="{% static "js/jquery.dataTables.min.js" %}"&gt;&lt;/script&gt;<br>
	&lt;/head&gt;<br>
	&lt;body&gt;<br>
	&lt;div id="page-wrapper"&gt;<br>
		&lt;div class="container-fluid"&gt;<br>
		{% block cuerpo %}<br>
		{% endblock cuerpo %}<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/body&gt;<br>
{% block js %}<br>
{% endblock js %}<br>
&lt;/html&gt;<br>
[/sourcecode]<br>
Vamos a modificar el archivo urls.py del proyecto de tal manera que al correrlo este apunte directamente a nuestra aplicación personas:</p>
<p>urls.py<br>
[sourcecode language="python"]<br>
from django.conf.urls import include, url<br>
 from django.contrib import admin</p>
<p>urlpatterns = [<br>
 url(r'^admin/', include(admin.site.urls)),<br>
 url(r'^', include('personas.urls',namespace='personas')),<br>
 ]<br>
[/sourcecode]<br>
Ahora crearemos nuestro modelo y unas vistas bastante simples, en el archivo models.py de la aplicación personas, creamos el modelo Persona:</p>
<p>models.py<br>
[sourcecode language="python"]<br>
from django.db import models</p>
<p># Create your models here.<br>
 class Persona(models.Model):<br>
    dni= models.CharField(primary_key=True,max_length=8)<br>
    nombre = models.CharField(max_length=100)<br>
    apellido_paterno = models.CharField(max_length=100)<br>
    apellido_materno = models.CharField(max_length=100)<br>
[/sourcecode]</p>
<p>Creamos dos vistas con sus respectivas urls:<br>
views.py<br>
[sourcecode language="python"]</p>
<p>from personas.models import Persona<br>
from django.core.urlresolvers import reverse_lazy<br>
from django.views.generic.edit import CreateView<br>
from django.views.generic.list import ListView</p>
<p># Create your views here.<br>
class CrearPersona(CreateView):<br>
    model = Persona<br>
    fields =['dni','nombre','apellido_paterno','apellido_materno']<br>
    template_name = ‘crear_persona.html’<br>
    success_url = reverse_lazy(‘personas:personas’)</p>
<p>class Personas(ListView):<br>
    model = Persona<br>
    template_name = ‘personas.html’<br>
    context_object_name = ‘personas’ </p>
<p>[/sourcecode]<br>
urls.py<br>
[sourcecode language="python"]<br>
from django.conf.urls import patterns, url<br>
from personas.views import Personas, CrearPersona</p>
<p>urlpatterns = patterns(”,<br>
    url(r’^crear_persona/$’,CrearPersona.as_view(), name="crear_persona"),<br>
    url(r’^',Personas.as_view(), name="personas"),<br>
)<br>
[/sourcecode]<br>
Ahora debemos crear la plantilla:</p>
<p>personas.html<br>
[sourcecode language="html"]<br>
{% extends "base.html" %}<br>
{% block cuerpo %}<br>
&lt;div class="row"&gt;<br>
    &lt;div class="col-lg-12"&gt;<br>
        &lt;h1 class="page-header"&gt;Tablas&lt;/h1&gt;<br>
    &lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div class="row"&gt;<br>
	&lt;div class="col-lg-12"&gt;<br>
		&lt;div class="panel panel-info"&gt;<br>
			&lt;div class="panel-heading"&gt;<br>
			    Personas<br>
			&lt;/div&gt;<br>
			&lt;div class="panel-body"&gt;<br>
				&lt;div class=’form-group’&gt;<br>
					&lt;div class="row"&gt;<br>
						&lt;div class="col-lg-3"&gt;	</p>
<p>						&lt;/div&gt;<br>
						&lt;div class="col-lg-8"&gt;</p>
<p>						&lt;/div&gt;<br>
						&lt;div class="col-lg-1"&gt;<br>
							&lt;a id="crear_detalle" href="{% url ‘tablas:crear_persona’ %}" class="btn btn-info btn-block"&gt;<br>
								&lt;span class="glyphicon glyphicon-plus"&gt;&lt;/span&gt;<br>
							&lt;/a&gt;<br>
						&lt;/div&gt;<br>
					&lt;/div&gt;<br>
				&lt;/div&gt;<br>
				&lt;div class="row"&gt;<br>
					&lt;div class="col-lg-12"&gt;<br>
						&lt;table id="tabla" class="table table-striped table-bordered" cellspacing="0" width="100%"&gt;<br>
							&lt;thead&gt;<br>
								&lt;tr&gt;<br>
									&lt;th class="text-center"&gt;DNI&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;NOMBRE&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;APELLIDO PATERNO&lt;/th&gt;<br>
									&lt;th class="text-center"&gt;APELLIDO MATERNO&lt;/th&gt;<br>
								&lt;/tr&gt;<br>
							&lt;/thead&gt;<br>
							&lt;tbody&gt;<br>
							{% for persona in personas %}<br>
								&lt;tr&gt;<br>
									&lt;td&gt;{{ persona.dni }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.nombre }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.apellido_paterno }}&lt;/td&gt;<br>
									&lt;td&gt;{{ persona.apellido_materno }}&lt;/td&gt;<br>
								&lt;/tr&gt;<br>
							{% endfor %}<br>
							&lt;/tbody&gt;<br>
						&lt;/table&gt;<br>
					&lt;/div&gt;<br>
				&lt;/div&gt;<br>
			&lt;/div&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/div&gt;<br>
{% endblock cuerpo %}<br>
{% block js %}<br>
&lt;script&gt;<br>
$(document).ready(function()<br>
{<br>
    var table = $(‘#tabla’).DataTable( {<br>
        "language": {<br>
        	url: "/static/localizacion/es_ES.json"<br>
        }<br>
    } );</p>
<p>    $(‘#tabla tbody’).on( ‘click’, ‘tr’, function()<br>
    {<br>
    	if ($(this).hasClass(‘selected’) )<br>
        {<br>
        	$(this).removeClass(‘selected’);</p>
<p>        }<br>
        else<br>
        {<br>
	        table.$(‘tr.selected’).removeClass(‘selected’);<br>
	        $(this).addClass(‘selected’);<br>
        }<br>
    });   </p>
<p>});<br>
&lt;/script&gt;<br>
{% endblock js %}<br>
[/sourcecode]<br>
Como hemos visto lineas arriba es en esta plantilla donde se hace uso de DataTables, primero se crea la tabla teniendo en cuenta que se la ha puesto el id “tabla” y además se hace la traducción al español invocando al archivo es_ES.json:<br>
[sourcecode language="js"]<br>
    var table = $(‘#tabla’).DataTable( {<br>
        "language": {<br>
        	url: "/static/localizacion/es_ES.json"<br>
        }<br>
    } );<br>
[/sourcecode]<br>
Lo siguiente es un efecto que se le da al seleccionar una de las filas de la tabla.</p>
<p>Y finalmente creamos el archivo:<br>
crear_persona.html<br>
[sourcecode language="html"]<br>
{% extends "base.html" %}<br>
{% block cuerpo %}</p>
<p>&lt;div class="row"&gt;<br>
    &lt;div class="col-lg-12"&gt;<br>
        &lt;h1 class="page-header"&gt;Tablas&lt;/h1&gt;<br>
    &lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div class="row"&gt;<br>
	&lt;div class="col-lg-12"&gt;<br>
		&lt;div class="panel panel-default"&gt;<br>
			&lt;div class="panel-heading"&gt;<br>
			    Crear Persona<br>
			&lt;/div&gt;<br>
			&lt;div class="panel-body"&gt;<br>
				&lt;form role="form" action="#" method="post"&gt;<br>
					{% csrf_token %}<br>
					&lt;div class="form-group"&gt;<br>
						{{ form.as_p }}<br>
					&lt;/div&gt;<br>
					&lt;div class=’form-group’&gt;<br>
						&lt;input type="submit" class="btn btn-primary" name="submit" value="Crear Persona"&gt;<br>
						&lt;button type="reset" class="btn btn-primary" onclick="location.href=’{% url ‘personas:personas’ %}’"&gt;<br>
						    Cancelar<br>
						&lt;/button&gt;<br>
					&lt;/div&gt;<br>
				&lt;/form&gt;<br>
			&lt;/div&gt;<br>
		&lt;/div&gt;<br>
	&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div id="popup"&gt;&lt;/div&gt;<br>
{% endblock cuerpo %}</p>
<p>{% block js %}</p>
<p>{% endblock js %}<br>
[/sourcecode]</p>
<p>Hacemos las migraciones correspondientes de nuestros modelos y finalmente corremos el servidor de prueba, si todo ha salido bien tendremos una aplicación como la siguiente:</p>
<p><a href="../../../../../2016/04/aplicacion.jpg" rel="attachment wp-att-147"><img class="alignnone size-medium wp-image-147" src="https://pythonpiura.files.wordpress.com/2016/04/aplicacion.jpg?w=300" alt="aplicacion" width="300" height="120"></a></p>

    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../../categories/django/" rel="tag">Django</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../17/deployando-proyectos-django-en-heroku/" rel="prev" title="Deployando Proyectos Django en Heroku">Publicación anterior</a>
            </li>
            <li class="next">
                <a href="../../19/generar-reportes-en-excel-desde-django/" rel="next" title="Generar Reportes en Excel desde Django">Siguiente publicación</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:pythonpiura@openmailbox.org">Comunidad Python Piura</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../../../../assets/js/all-nocdn.js"></script><script src="../../../../../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
