<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="es">
<head>
<meta charset="utf-8">
<base href="http://pythonpiura.org/blog/index-1.html">
<meta name="description" content="Comunidad Python Piura">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Python Piura (publicaciones antiguas, página 1) | Python Piura</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://pythonpiura.org/blog/index-1.html">
<link rel="prev" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://pythonpiura.org/">

                <span id="blog-title">Python Piura</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../blog">Blog</a>
                </li>
<li>
<a href="../eventos">Eventos</a>
                </li>
<li>
<a href="../recursos">Recursos</a>
                </li>
<li>
<a href="../contactenos">Contáctenos</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/04/18/datatables-jquery-bootstrap-y-django/" class="u-url">DataTables JQuery, Bootstrap y Django</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/04/18/datatables-jquery-bootstrap-y-django/" rel="bookmark"><time class="published dt-published" datetime="2016-04-18T22:35:28-05:00" title="2016-04-18 22:35">2016-04-18 22:35</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Muchas veces al querer mostrar un listado o un conjunto de objetos,
necesitamos hacer uso de tablas, esto lo podemos trabajar de manera
sencilla usando una simple tabla html, pero que pasa cuando queremos
tener mayores prestaciones, como búsquedas, ordenamiento paginación,
etc. En este caso tenemos que recurrir a elementos mas avanzados, en
internet podemos encontrar muchísimas aplicaciones con tablas que nos
facilitan la vida, pero en esta oportunidad vamos a trabajar con una
herramienta que nos ha parecido muy interesante y que nos ha resultado
muy fácil de configurar y además trabaja con JQuery, la aplicación se
llama <a class="reference external" href="https://datatables.net/">DataTables</a> y como su página dice es un plugin para JQuery,
para empezar a trabajar debemos descargarla desde el siguiente
<a class="reference external" href="https://datatables.net/download/download">enlace.</a></p>
<p>Para poder mostrar un sitio web mas o menos presentable vamos a echar
mano de Bootstrap, como ya es bien conocido en el mundo del desarrollo
web <a class="reference external" href="http://getbootstrap.com/">Bootstrap</a> es un framework que nos facilita el diseño de
nuestras aplicaciones, contiene plantillas de diseño con tipografía,
formularios, botones, cuadros, menús de navegación y otros elementos
de diseño basado en HTML y CSS, así como, extensiones de JavaScript,
la última versión la podemos descargar de esta <a class="reference external" href="https://github.com/twbs/bootstrap/releases/download/v3.3.6/bootstrap-3.3.6-dist.zip">ubicación</a>.</p>
<p>Ahora si, vamos a empezar creando nuestro proyecto en django, nosotros
utilizamos como IDE Eclipse con pydev, si quieren una guía para
configurarlo dense una vuelta por <a class="reference external" href="http://www.pythondiario.com/2013/06/eclipse-y-pydev-configuracion-del-ide.html">aquí</a>. Nuestro proyecto se llamará
tutorial, dentro del proyecto vamos a crear la aplicación personas, de
tal manera que tengamos la siguiente estructura:</p>
<p>Ahora vamos a crear una carpeta llamada static en la raiz del proyecto
y dentro de ella vamos a crear las carpetas css, js, fonts, images y
localizacion.</p>
<p>Nos toca configurar el archivo settings para que nuestros archivos
estáticos se muestren correctamente, agregamos la siguiente linea al
final del archivo.</p>
<p>settings.py</p>
<pre class="code python"><a name="rest_code_e390e8d666974b2ca99c36518daac440-1"></a><span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_e390e8d666974b2ca99c36518daac440-2"></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">'static'</span><span class="p">),</span>
<a name="rest_code_e390e8d666974b2ca99c36518daac440-3"></a><span class="p">)</span>
</pre>
<p>Y ahora como ya tenemos descargados tanto DataTables como Bootstrap
los descomprimimos, en DataTables buscamos la carpeta media, aquí
encontraremos las carpetas css, images y js, vamos a trabajar de la
manera mas sencilla que podamos por lo que no vamos a necesitar todo
el contenido de las carpetas antes mencionadas, así que de la carpeta
css seleccionamos el archivo jquery.dataTables.min.css y lo copiamos a
la carpeta css de nuestro proyecto, de la carpeta js seleccionamos los
archivos jquery.js y jquery.dataTables.min.js y los copiamos a la
carpeta js de nuestro proyecto,el contenido de la carpeta images si lo
copiamos integro dentro de nuestra carpeta images. Lo mismo hacemos
con Bootstrap copiamos los archivos bootstrap.min.css y
bootstrap.min.css.map a nuestra carpeta css, copiamos todo el
contenido de la carpeta fonts a nuestra carpeta fonts y finalmente
copiamos el archivo bootstrap.min.js a nuestra carpeta js.
Adicionalmente a esto debemos copiar el contenido del siguiente
<a class="reference external" href="https://www.datatables.net/plug-ins/i18n/Spanish">enlace</a> y crear un archivo en la carpeta localización que en este
caso le hemos llamado es_ES.json, esto sirve para traducir DataTables
al español.</p>
<p>Finalmente tendremos lo siguiente dentro de nuestra carpeta static:</p>
<p>Ahora vamos a crear una carpeta llamada templates que va a contener
nuestras plantillas html dentro de la aplicación personas. Dentro de
esta carpeta creamos un archivo llamado base.html que va a ser la
plantilla madre de la que heredarán las demás, este archivo tendrá el
siguiente contenido:</p>
<pre class="code html"><a name="rest_code_7f6258aee28041808f96933fde2b9bbb-1"></a>{% load staticfiles %}
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-2"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-3"></a><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-4"></a><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-5"></a>Ejemplo Círculo de Programadores de Python Piura
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-6"></a><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="na">href</span><span class="o">=</span><span class="s">"{% static "</span><span class="na">css</span><span class="err">/</span><span class="na">bootstrap</span><span class="err">.</span><span class="na">min</span><span class="err">.</span><span class="na">css</span><span class="err">"</span> <span class="err">%}"</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-7"></a><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="na">href</span><span class="o">=</span><span class="s">"{% static "</span><span class="na">css</span><span class="err">/</span><span class="na">jquery</span><span class="err">.</span><span class="na">dataTables</span><span class="err">.</span><span class="na">min</span><span class="err">.</span><span class="na">css</span><span class="err">"</span> <span class="err">%}"</span> <span class="p">/&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-8"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"{% static "</span><span class="na">js</span><span class="err">/</span><span class="na">jquery</span><span class="err">.</span><span class="na">js</span><span class="err">"</span> <span class="err">%}"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-9"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"{% static "</span><span class="na">js</span><span class="err">/</span><span class="na">bootstrap</span><span class="err">.</span><span class="na">min</span><span class="err">.</span><span class="na">js</span><span class="err">"</span> <span class="err">%}"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-10"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"{% static "</span><span class="na">js</span><span class="err">/</span><span class="na">jquery</span><span class="err">.</span><span class="na">dataTables</span><span class="err">.</span><span class="na">min</span><span class="err">.</span><span class="na">js</span><span class="err">"</span> <span class="err">%}"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-11"></a><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-12"></a><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-13"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"page-wrapper"</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-14"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"container-fluid"</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-15"></a>{% block cuerpo %}
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-16"></a>{% endblock cuerpo %}
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-17"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-18"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-19"></a><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-20"></a>{% block js %}
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-21"></a>{% endblock js %}
<a name="rest_code_7f6258aee28041808f96933fde2b9bbb-22"></a><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
<p>Vamos a modificar el archivo urls.py del proyecto de tal manera que al
correrlo este apunte directamente a nuestra aplicación personas:</p>
<p>urls.py</p>
<pre class="code python"><a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-1"></a><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-2"></a><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-3"></a>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-4"></a><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-5"></a><span class="n">url</span><span class="p">(</span><span class="s1">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-6"></a><span class="n">url</span><span class="p">(</span><span class="s1">r'^'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">'personas.urls'</span><span class="p">,</span><span class="n">namespace</span><span class="o">=</span><span class="s1">'personas'</span><span class="p">)),</span>
<a name="rest_code_dcaea05d3628492b924dc7c44aa4e945-7"></a><span class="p">]</span>
</pre>
<p>Ahora crearemos nuestro modelo y unas vistas bastante simples, en el
archivo models.py de la aplicación personas, creamos el modelo
Persona:</p>
<p>models.py</p>
<pre class="code python"><a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-1"></a><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-2"></a>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-3"></a><span class="c1"># Create your models here.</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-4"></a><span class="k">class</span> <span class="nc">Persona</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-5"></a><span class="n">dni</span><span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">max_length</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-6"></a><span class="n">nombre</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-7"></a><span class="n">apellido_paterno</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<a name="rest_code_9ebd73ca2bb14982a1f2e5e1782f4401-8"></a><span class="n">apellido_materno</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre>
<p>Creamos dos vistas con sus respectivas urls:
views.py</p>
<pre class="code python"><a name="rest_code_d7953b16c1e24726a644adf6d3410e37-1"></a><span class="kn">from</span> <span class="nn">personas.models</span> <span class="kn">import</span> <span class="n">Persona</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-2"></a><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse_lazy</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-3"></a><span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">CreateView</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-4"></a><span class="kn">from</span> <span class="nn">django.views.generic.list</span> <span class="kn">import</span> <span class="n">ListView</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-5"></a>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-6"></a><span class="c1"># Create your views here.</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-7"></a><span class="k">class</span> <span class="nc">CrearPersona</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-8"></a><span class="n">model</span> <span class="o">=</span> <span class="n">Persona</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-9"></a><span class="n">fields</span> <span class="o">=</span><span class="p">[</span><span class="s1">'dni'</span><span class="p">,</span><span class="s1">'nombre'</span><span class="p">,</span><span class="s1">'apellido_paterno'</span><span class="p">,</span><span class="s1">'apellido_materno'</span><span class="p">]</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-10"></a><span class="n">template_name</span> <span class="o">=</span> <span class="s1">'crear_persona.html'</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-11"></a><span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s1">'personas:personas'</span><span class="p">)</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-12"></a>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-13"></a><span class="k">class</span> <span class="nc">Personas</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-14"></a><span class="n">model</span> <span class="o">=</span> <span class="n">Persona</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-15"></a><span class="n">template_name</span> <span class="o">=</span> <span class="s1">'personas.html'</span>
<a name="rest_code_d7953b16c1e24726a644adf6d3410e37-16"></a><span class="n">context_object_name</span> <span class="o">=</span> <span class="s1">'personas'</span>
</pre>
<p>urls.py</p>
<pre class="code python"><a name="rest_code_16c47b0803b34a38852a961585fab869-1"></a><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">url</span>
<a name="rest_code_16c47b0803b34a38852a961585fab869-2"></a><span class="kn">from</span> <span class="nn">personas.views</span> <span class="kn">import</span> <span class="n">Personas</span><span class="p">,</span> <span class="n">CrearPersona</span>
<a name="rest_code_16c47b0803b34a38852a961585fab869-3"></a>
<a name="rest_code_16c47b0803b34a38852a961585fab869-4"></a><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s2">",</span>
<a name="rest_code_16c47b0803b34a38852a961585fab869-5"></a><span class="n">url</span><span class="p">(</span><span class="s1">r'^crear_persona/$'</span><span class="p">,</span><span class="n">CrearPersona</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"crear_persona"</span><span class="p">),</span>
<a name="rest_code_16c47b0803b34a38852a961585fab869-6"></a><span class="n">url</span><span class="p">(</span><span class="s1">r'^'</span><span class="p">,</span><span class="n">Personas</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"personas"</span><span class="p">),</span>
<a name="rest_code_16c47b0803b34a38852a961585fab869-7"></a><span class="p">)</span>
</pre>
<p>Ahora debemos crear la plantilla:</p>
<p>personas.html</p>
<pre class="code html"><a name="rest_code_3602203127ef40348bd5f8065cae6455-1"></a>{% extends "base.html" %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-2"></a>{% block cuerpo %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-3"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-4"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-5"></a><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">"page-header"</span><span class="p">&gt;</span>Tablas<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-6"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-7"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-8"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-9"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-10"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel panel-info"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-11"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-heading"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-12"></a>Personas
<a name="rest_code_3602203127ef40348bd5f8065cae6455-13"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-14"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-body"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-15"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">'form-group'</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-16"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-17"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-3"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-18"></a>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-19"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-20"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-8"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-21"></a>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-22"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-23"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-1"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-24"></a><span class="p">&lt;</span><span class="nt">a</span> <span class="na">id</span><span class="o">=</span><span class="s">"crear_detalle"</span> <span class="na">href</span><span class="o">=</span><span class="s">"{% url 'tablas:crear_persona' %}"</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-25"></a><span class="na">class</span><span class="o">=</span><span class="s">"btn btn-info btn-block"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-26"></a><span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"glyphicon glyphicon-plus"</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-27"></a><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-28"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-29"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-30"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-31"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-32"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-33"></a><span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">"tabla"</span> <span class="na">class</span><span class="o">=</span><span class="s">"table table-striped table-bordered"</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-34"></a><span class="na">cellspacing</span><span class="o">=</span><span class="s">"0"</span> <span class="na">width</span><span class="o">=</span><span class="s">"100%"</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-35"></a><span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-36"></a><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-37"></a><span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>DNI<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-38"></a><span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>NOMBRE<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-39"></a><span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>APELLIDO PATERNO<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-40"></a><span class="p">&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">"text-center"</span><span class="p">&gt;</span>APELLIDO MATERNO<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-41"></a><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-42"></a><span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-43"></a><span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-44"></a>{% for persona in personas %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-45"></a><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-46"></a><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ persona.dni }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-47"></a><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ persona.nombre }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-48"></a><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ persona.apellido_paterno }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-49"></a><span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ persona.apellido_materno }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-50"></a><span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-51"></a>{% endfor %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-52"></a><span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-53"></a><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-54"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-55"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-56"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-57"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-58"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-59"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-60"></a>{% endblock cuerpo %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-61"></a>{% block js %}
<a name="rest_code_3602203127ef40348bd5f8065cae6455-62"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-63"></a><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-64"></a><span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-65"></a><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tabla'</span><span class="p">).</span><span class="nx">DataTable</span><span class="p">(</span> <span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-66"></a><span class="s2">"language"</span><span class="o">:</span> <span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-67"></a><span class="nx">url</span><span class="o">:</span> <span class="s2">"/static/localizacion/es_ES.json"</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-68"></a><span class="p">}</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-69"></a><span class="p">}</span> <span class="p">);</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-70"></a>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-71"></a><span class="nx">$</span><span class="p">(</span><span class="s1">'#tabla tbody'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span> <span class="s1">'click'</span><span class="p">,</span> <span class="s1">'tr'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-72"></a><span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-73"></a><span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'selected'</span><span class="p">)</span> <span class="p">)</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-74"></a><span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-75"></a><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">'selected'</span><span class="p">);</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-76"></a>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-77"></a><span class="p">}</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-78"></a><span class="k">else</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-79"></a><span class="p">{</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-80"></a><span class="nx">table</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">'tr.selected'</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s1">'selected'</span><span class="p">);</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-81"></a><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'selected'</span><span class="p">);</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-82"></a><span class="p">}</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-83"></a><span class="p">});</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-84"></a>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-85"></a><span class="p">});</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-86"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_3602203127ef40348bd5f8065cae6455-87"></a>{% endblock js %}
</pre>
<p>Como hemos visto lineas arriba es en esta plantilla donde se hace uso
de DataTables, primero se crea la tabla teniendo en cuenta que se la
ha puesto el id “tabla" y además se hace la traducción al español
invocando al archivo es_ES.json:</p>
<pre class="code javascript"><a name="rest_code_8e5d31d44f214fec824c99c78e7fb415-1"></a><span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#tabla'</span><span class="p">).</span><span class="nx">DataTable</span><span class="p">(</span> <span class="p">{</span>
<a name="rest_code_8e5d31d44f214fec824c99c78e7fb415-2"></a><span class="s2">"language"</span><span class="o">:</span> <span class="p">{</span>
<a name="rest_code_8e5d31d44f214fec824c99c78e7fb415-3"></a><span class="nx">url</span><span class="o">:</span> <span class="s2">"/static/localizacion/es_ES.json"</span>
<a name="rest_code_8e5d31d44f214fec824c99c78e7fb415-4"></a><span class="p">}</span>
<a name="rest_code_8e5d31d44f214fec824c99c78e7fb415-5"></a><span class="p">}</span> <span class="p">);</span>
</pre>
<p>Lo siguiente es un efecto que se le da al seleccionar una de las filas
de la tabla.</p>
<p>Y finalmente creamos el archivo:</p>
<p>crear_persona.html</p>
<pre class="code html"><a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-1"></a>{% extends "base.html" %}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-2"></a>{% block cuerpo %}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-3"></a>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-4"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-5"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-6"></a><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">"page-header"</span><span class="p">&gt;</span>Tablas<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-7"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-8"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-9"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"row"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-10"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"col-lg-12"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-11"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel panel-default"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-12"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-heading"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-13"></a>Crear Persona
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-14"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-15"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"panel-body"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-16"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">role</span><span class="o">=</span><span class="s">"form"</span> <span class="na">action</span><span class="o">=</span><span class="s">"#"</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-17"></a>{% csrf_token %}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-18"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-group"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-19"></a>{{ form.as_p }}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-20"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-21"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">'form-group'</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-22"></a><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span> <span class="na">name</span><span class="o">=</span><span class="s">"submit"</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-23"></a><span class="na">value</span><span class="o">=</span><span class="s">"Crear Persona"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-24"></a><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"reset"</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-primary"</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-25"></a><span class="na">onclick</span><span class="o">=</span><span class="s">"location.href='{% url 'personas:personas' %}'"</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-26"></a>Cancelar
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-27"></a><span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-28"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-29"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-30"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-31"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-32"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-33"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-34"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"popup"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-35"></a>{% endblock cuerpo %}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-36"></a>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-37"></a>{% block js %}
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-38"></a>
<a name="rest_code_88fd3376d9874e549f2cab85c0bbf8a3-39"></a>{% endblock js %}
</pre>
<p>Hacemos las migraciones correspondientes de nuestros modelos y
finalmente corremos el servidor de prueba, si todo ha salido bien
tendremos una aplicación como la siguiente:</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/04/17/deployando-proyectos-django-en-heroku/" class="u-url">Deployando Proyectos Django en Heroku</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/04/17/deployando-proyectos-django-en-heroku/" rel="bookmark"><time class="published dt-published" datetime="2016-04-17T16:44:49-05:00" title="2016-04-17 16:44">2016-04-17 16:44</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><a class="reference external" href="https://www.heroku.com/">Heroku</a> es una plataforma que brinda servicios en la nube y soporta
varios lenguajes de programación, funciona muy bien con Python y
Django y en esta ocasión haremos un pequeño tutorial basado en el
tutorial oficial, que se puede encontrar en la página del proyecto.
Para empezar a trabajar debemos tener una cuenta en Heroku, hay planes
de varios tipos, nosotros escogeremos el plan Free. Antes de empezar
nos vamos a cerciorar de tener instaladas algunas cosas básicas, que
ya hemos visto antes pero que siempre es bueno recordar:</p>
<ul class="simple">
<li>Pip.</li>
<li>Virtualenv</li>
<li>Git.</li>
<li>Y en nuestro caso la base de datos PostgreSQL.</li>
</ul>
<p>El primer paso es instalar Heroku Toolbelt, esta aplicación provee
acceso a la interfaz de linea de comandos(CLI) de Heroku, que es usada
para administrar y escalar nuestras aplicaciones y sus añadidos, para
tenerlo instalado debemos poner el siguiente comando en nuestra
terminal:</p>
<pre class="code bash"><a name="rest_code_1026bbe8aa1d49af8022c2cd39fb9dcf-1"></a>wget -O- https://toolbelt.heroku.com/install-ubuntu.sh <span class="p">|</span> sh
</pre>
<p>El script nos pedira permisos de superusuario para continuar, se los
damos y esperamos que la instalación se efectue.</p>
<p>Una vez que hemos terminado de instalar debemos loguearnos utilizando
el usuario y password que hemos registrado en la página de Heroku de
la siguiente manera:</p>
<pre class="code bash"><a name="rest_code_8a423dd515c44b759ca20b534b039295-1"></a>heroku login
</pre>
<p>Si es la primera vez que lanzamos la aplicación se demorará un poquito
instalando y configurando todo lo necesario, despues nos pedirá
usuario y password, si ingresamos las credenciales correctamente nos
saldrá un mensaje como este:</p>
<pre class="code bash"><a name="rest_code_2824ba2dae6945a6bba4b60950815fe8-1"></a>Logged in as miguel.amaya99@gmail.com
</pre>
<p>Una vez que hemos hecho esto el manual oficial de Heroku nos indica
que debemos clonar una aplicación de prueba para deployar, nosotros ya
tenemos una aplicación desarrollada por lo que debemos hacer algunos
cambios a esta para poder subirla sin ningún problema.</p>
<p>Primero debemos agregar dos archivos en la raiz del proyecto:</p>
<p>El archivo procfile que debe tener el siguiente contenido:</p>
<pre class="code python"><a name="rest_code_80b7a3286684407481d529ff2403070e-1"></a><span class="n">web</span><span class="p">:</span> <span class="n">gunicorn</span> <span class="n">volpox</span><span class="o">.</span><span class="n">wsgi</span> <span class="o">-</span><span class="n">log</span><span class="o">-</span><span class="nb">file</span> <span class="o">-</span>
</pre>
<p>En la parte donde dice “volpox.wsgi” se debe reemplazar por el nombre
de su proyecto.</p>
<p>El archivo requirements.txt debe tener todos las aplicaciones que
nuestro proyecto necesita para funcionar correctamente, esto se puede
averiguar facilmente ejecutando el comando pip freeze y guardando su
contenido en el archivo, en nuestro caso el contenido del archivo es
el siguiente:</p>
<pre class="code python"><a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-1"></a><span class="n">dj</span><span class="o">-</span><span class="n">database</span><span class="o">-</span><span class="n">url</span><span class="o">==</span><span class="mf">0.4</span><span class="o">.</span><span class="mi">0</span>
<a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-2"></a><span class="n">Django</span><span class="o">==</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">2</span>
<a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-3"></a><span class="n">gunicorn</span><span class="o">==</span><span class="mf">19.4</span><span class="o">.</span><span class="mi">5</span>
<a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-4"></a><span class="n">psycopg2</span><span class="o">==</span><span class="mf">2.6</span><span class="o">.</span><span class="mi">1</span>
<a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-5"></a><span class="n">whitenoise</span><span class="o">==</span><span class="mf">2.0</span><span class="o">.</span><span class="mi">6</span>
</pre>
<p>Debemos tener en cuenta que este es el contenido básico para
garantizar el correcto funcionamiento de nuestra aplicación en Heroku,
hemos adicionado el paquete psycopg2 para poder trabajar con
postgresql, si su proyecto usa algún paquete de software adicional,
póngalo en este archivo.</p>
<p>Ahora debemos modificar el archivo settings.py agregando las
siguientes lineas:</p>
<pre class="code python"><a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-1"></a><span class="c1">#Al inicio</span>
<a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-2"></a>
<a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-3"></a><span class="kn">import</span> <span class="nn">dj_database_url</span>
<a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-4"></a>
<a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-5"></a><span class="n">PROJECT_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
</pre>
<p>En la parte donde está:</p>
<pre class="code python"><a name="rest_code_26704d4034324ed89c6aa77e075da4be-1"></a><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[]</span>
</pre>
<p>Lo cambiamos por:</p>
<pre class="code python"><a name="rest_code_e4655541dc2d475799eeb9a72b78d53e-1"></a><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'*'</span><span class="p">]</span>
</pre>
<p>En la parte final agregamos esto:</p>
<pre class="code python"><a name="rest_code_4939c9e8213c481d82669f6e965eaa29-1"></a><span class="n">db_from_env</span> <span class="o">=</span> <span class="n">dj_database_url</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">conn_max_age</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-2"></a><span class="n">DATABASES</span><span class="p">[</span><span class="s1">'default'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">db_from_env</span><span class="p">)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-3"></a>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-4"></a><span class="c1"># Honor the 'X-Forwarded-Proto' header for request.is_secure()</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-5"></a><span class="n">SECURE_PROXY_SSL_HEADER</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'HTTP_X_FORWARDED_PROTO'</span><span class="p">,</span> <span class="s1">'https'</span><span class="p">)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-6"></a><span class="c1"># Static files (CSS, JavaScript, Images)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-7"></a><span class="c1"># https://docs.djangoproject.com/en/1.8/howto/static-files/</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-8"></a>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-9"></a><span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_ROOT</span><span class="p">,</span> <span class="s1">'staticfiles'</span><span class="p">)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-10"></a>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-11"></a><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s1">'/static/'</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-12"></a>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-13"></a><span class="c1"># Extra places for collectstatic to find static files.</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-14"></a><span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">(</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-15"></a><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">'static'</span><span class="p">),</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-16"></a><span class="p">)</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-17"></a><span class="n">STATICFILES_STORAGE</span> <span class="o">=</span>
<a name="rest_code_4939c9e8213c481d82669f6e965eaa29-18"></a><span class="s1">'whitenoise.django.GzipManifestStaticFilesStorage'</span>
</pre>
<p>Ahora debemos cambiar el contenido del archivo wsgi.py</p>
<pre class="code python"><a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-2"></a><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">"DJANGO_SETTINGS_MODULE"</span><span class="p">,</span> <span class="s2">"volpox.settings"</span><span class="p">)</span>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-3"></a>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-4"></a><span class="kn">from</span> <span class="nn">django.core.wsgi</span> <span class="kn">import</span> <span class="n">get_wsgi_application</span>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-5"></a><span class="kn">from</span> <span class="nn">whitenoise.django</span> <span class="kn">import</span> <span class="n">DjangoWhiteNoise</span>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-6"></a>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-7"></a><span class="n">application</span> <span class="o">=</span> <span class="n">get_wsgi_application</span><span class="p">()</span>
<a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-8"></a><span class="n">application</span> <span class="o">=</span> <span class="n">DjangoWhiteNoise</span><span class="p">(</span><span class="n">application</span><span class="p">)</span>
</pre>
<p>También debemos crear un archivo .gitignore, que es usado por git para
no trabajar con las extensiones de archivos mencionados aquí en
nuestro caso serán las siguientes:</p>
<pre class="code python"><a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-1"></a><span class="n">venv</span>
<a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-2"></a><span class="o">*.</span><span class="n">pyc</span>
<a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-3"></a><span class="n">staticfiles</span>
<a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-4"></a><span class="o">.</span><span class="n">env</span>
<a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-5"></a><span class="n">db</span><span class="o">.</span><span class="n">sqlite3</span>
</pre>
<p>Ahora debemos crear un repositorio git con el siguiente comando:</p>
<pre class="code bash"><a name="rest_code_a9519bf76dc7487e845b066218eb8649-1"></a>git init
</pre>
<p>Añadimos los archivos:</p>
<pre class="code bash"><a name="rest_code_9359f1c732774a5499867d4a6e3ed713-1"></a>git add *
</pre>
<p>Y hacemos nuestro primer commit:</p>
<pre class="code bash"><a name="rest_code_4784e346f2594b43b218c22d03ae4504-1"></a>git commit -m <span class="s2">"Deployando proyecto"</span>
</pre>
<p>Creamos nuestro proyecto en Heroku:</p>
<pre class="code bash"><a name="rest_code_21e12f7bc6e74954a9fda45ce9bbee1c-1"></a>heroku create volpox
</pre>
<p>Ahora si procedamos a subir nuestro proyecto a Heroku:</p>
<pre class="code bash"><a name="rest_code_7a6c81a8a5aa4da9bcad073d346fa992-1"></a>git push heroku master
</pre>
<p>Si tuviesemos algún error, revisar los archivos de la carpeta static,
generalmente la mayoría de errores se presentan por rutas no
encontradas o cosas así.</p>
<p>Si todo ha salido correctamente vamos a proceder a asegurarnos de que
al menos una instancia de la aplicación se está ejecutando:</p>
<pre class="code bash"><a name="rest_code_b6f0b9ba3670473b82e3707f079e3952-1"></a>heroku ps:scale <span class="nv">web</span><span class="o">=</span>1
</pre>
<p>Ahora abrimos el proyecto con el navegador por defecto:</p>
<pre class="code bash"><a name="rest_code_8a6b57fb13d24253b87dfda899798570-1"></a>heroku open
</pre>
<p>Listo, ya tenemos nuestra aplicación funcionando correctamente, ahora
falta configurar la base de datos, para ello vamos a utilizar el
siguiente comando:</p>
<pre class="code bash"><a name="rest_code_1a8937946efd4bb5817a856a7a1a3578-1"></a>heroku addons
</pre>
<p>Con esto añadimos una base de datos PostgreSQL en el plan Free de
nuestra cuenta.
Los siguiente comandos:</p>
<pre class="code bash"><a name="rest_code_9fe26a85020b44c69be07df535b4a0fb-1"></a>heroku config
<a name="rest_code_9fe26a85020b44c69be07df535b4a0fb-2"></a>heroku pg
</pre>
<p>Nos permiten ver la configuración de nuestra base de datos.</p>
<p>Procedemos a crear nuestras tablas en la base de datos creada, usando
el comando migrate de la siguiente manera:</p>
<pre class="code bash"><a name="rest_code_53579d22c6dd4f7cae7e57ec0c8d01be-1"></a>heroku run python manage.py migrate
</pre>
<p>Si es necesario procedemos a crear nuestro superusuario:</p>
<pre class="code bash"><a name="rest_code_0f122c54c51a43849ae87b968e07fa9d-1"></a>heroku run python manage.py createsuperuser
</pre>
<p>Listo ya tenemos nuestra aplicación desplegada. Hasta la próxima.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/04/14/servir-aplicaciones-django-con-apache-y-mod_wsgi-en-centos-7/" class="u-url">Servir Aplicaciones Django con Apache y mod_wsgi en Centos 7</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/04/14/servir-aplicaciones-django-con-apache-y-mod_wsgi-en-centos-7/" rel="bookmark"><time class="published dt-published" datetime="2016-04-14T22:34:33-05:00" title="2016-04-14 22:34">2016-04-14 22:34</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Para instalar un servidor de producción Django en Centos 7 usaremos
Apache y mod_wsgi, mod_wsgi es un módulo de Apache, que permite servir
aplicaciones hechas en Python, que tengan soporte para la interfaz
WSGI.
Los requisitos para esto son tener un servidor Centos 7 correctamente
instalado y configurado y los permisos de root para poder hacer las
instalaciones correspondientes. Para comenzar el proceso, vamos a
descargar e instalar todos los elementos que necesitamos de los
repositorios de la distribución. Esto incluirá el servidor web Apache,
el módulo mod_wsgi utilizado para interactuar con nuestra aplicación
Django, y pip. Para obtener pip, tendremos que habilitar el
repositorio EPEL(paquetes para Linux Empresarial):</p>
<pre class="code bash"><a name="rest_code_ed55c85b2b334c369cd6c938ef709421-1"></a>yum install epel-release
</pre>
<p>Con EPEL habilitado nosotros podemos instalar los componentes
tipeando:</p>
<pre class="code bash"><a name="rest_code_94679e24e08949afb49b30450227bffe-1"></a>yum install python-pip httpd mod_wsgi
</pre>
<p>Ahora que ya tenemos instalados los paquetes necesarios, debemos crear
un entorno virtual para ellos instalaremos virtualenv usando pip:</p>
<pre class="code bash"><a name="rest_code_d4fcb12bb1cc4b92a4b33e89c4cc0429-1"></a>pip install virtualenv
</pre>
<p>Ahora procedemos a crear nuestro entorno virtual:</p>
<pre class="code bash"><a name="rest_code_556f593dc2f04fdda20cea2ac46d789f-1"></a>virtualenv vproduccion
</pre>
<p>Y lo activamos:</p>
<pre class="code bash"><a name="rest_code_e69d85259dea4d8ea0af518bd427faa1-1"></a><span class="nb">source</span> vproduccion/bin/activate
</pre>
<p>Cuando activamos el entorno virtual nuestro prompt debe cambiar y
aparecer entre paréntesis el nombre del entorno virtual activado.
Una vez que esto ha sucedido debemos instalar Django:</p>
<pre class="code bash"><a name="rest_code_6a4d9cc9df864ee2bca755674ec1ce37-1"></a>pip install django
</pre>
<p>Cuando ya tengamos listo esto, subimos o creamos nuestro proyecto
Django utilizando los comandos clásicos que ya hemos utilizado antes,
ahora nos toca configurar Apache.
Una vez que comprobamos que el proyecto Django está funcionando,
podemos configurar Apache como un front-end. Las conexiones de cliente
que recibe serán traducidos al formato WSGI que la aplicación Django
espera utilizando el módulo mod_wsgi. Esto debería haber sido activado
automáticamente después de la instalación anterior. Para configurar lo
anterior, tendremos que crear un nuevo archivo de configuración en el
directorio /etc/httpd/conf.d. Vamos a llamar a este archivo
django.conf:</p>
<pre class="code bash"><a name="rest_code_5b467e05630640bcb5c06dacdc22df8b-1"></a>nano /etc/httpd/conf.d/django.conf
</pre>
<p>Y dentro de él escribiremos lo siguiente:</p>
<pre class="code bash"><a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-1"></a><span class="c1">#En mi caso la ruta es /home/jamaya y mi proyecto se llama siad</span>
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-2"></a><span class="c1">#Configuración para mostrar correctamente losa archivos estáticos</span>
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-3"></a>Alias /static /home/jamaya/siad/static
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-4"></a>&lt;Directory /home/jamaya/siad/static&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-5"></a>        Require all granted
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-6"></a>&lt;/Directory&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-7"></a><span class="c1">#Configuración para acceder correctamente al wsgi.py</span>
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-8"></a>&lt;Directory /home/jamaya/siad/siad/&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-9"></a>        &lt;Files wsgi.py&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-10"></a>                Require all granted
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-11"></a>        &lt;/Files&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-12"></a>&lt;/Directory&gt;
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-13"></a>
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-14"></a>WSGIDaemonProcess siad python-path<span class="o">=</span>/home/jamaya/siad:/home/jamaya/vproduccion/lib/python2.7/site-packages
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-15"></a>WSGIProcessGroup siad
<a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-16"></a>WSGIScriptAlias /siad /home/jamaya/siad/siad/wsgi.py
</pre>
<p>A continuación, tenemos que arreglar los permisos para que el servicio
de Apache puede acceder a nuestros archivos. Por defecto CentOS
bloquea el directorio personal de cada usuario de manera muy
restrictiva. Para evitar esto, añadiremos el usuario apache al grupo
de nuestro propio usuario. Esto nos permitirá abrir los permisos sólo
lo suficiente para que pueda llegar a los archivos correspondientes.
Añadimos el usuario apache a nuestro grupo, reemplazamos la palabra
jamaya con nuestro usuario:</p>
<pre class="code bash"><a name="rest_code_7a4e94f4959e4f40b3ae62c3b756a1d4-1"></a>usermod -a -G jamaya apache
</pre>
<p>Damos permisos al grupo en la carpeta personal, esto permitirá al
proceso apache acceder a los archivos.</p>
<pre class="code bash"><a name="rest_code_731c7dcc4652446d95e7698da7e2a7d8-1"></a>chmod <span class="m">710</span> /home/jamaya
</pre>
<p>Ya podemos iniciar el servicio de apache:</p>
<pre class="code bash"><a name="rest_code_abd3dbf1e5e743efabb8eabb7c3216e2-1"></a>systemctl start httpd
</pre>
<p>Vamos a probar si la carga del proyecto funciona, vamos a otra
computadora de la red y colocamos la direccion ip de nuestro servidor
y la aplicación:</p>
<pre class="code bash"><a name="rest_code_1d8d98539f4d4e7cbbb4b18f48c25b87-1"></a>http://172.20.30.129/siad
</pre>
<p>Si hubiese algún problema lo mas rápido y sencillo es deshabilitar
SELINUX, esto lo hacemos editando el archivo:</p>
<pre class="code bash"><a name="rest_code_0ac575a221aa47cbb1f58a597c222fd5-1"></a>/etc/selinux/config
</pre>
<p>Y cambiando la siguiente linea:</p>
<pre class="code bash"><a name="rest_code_f7a73805211a43c6a16243c858f27bc8-1"></a><span class="nv">SELINUX</span><span class="o">=</span>disabled
</pre>
<p>Si todo funciona correctamente habilitamos el servicio apache para que
se inicie automaticamente:</p>
<pre class="code bash"><a name="rest_code_310db2e786eb47d7be81de572d3a0613-1"></a>systemctl <span class="nb">enable</span> httpd
</pre>
<p>Recuerden tener siempre su archivo requerimientos.txt o
requirements.txt para instalar todas las dependendencias que hacen que
nuestro proyecto funcione con éxito. Este archivo se obtiene en
nuestro entorno de desarrollo escribiendo el siguiente comando:</p>
<pre class="code bash"><a name="rest_code_cc944d40218e418586bb220b9ea663ee-1"></a>pip freeze &gt; requirements.txt
</pre>
<p>Y para instalarlas en nuestro entorno de producción usamos el mismo
comando con algunas variantes:</p>
<pre class="code bash"><a name="rest_code_b8180f60af94468cb4e2255ebae6b38f-1"></a>pip install -r requirements.txt
</pre>
<p>En el caso nuestro teniamos un par de dependencias un poco complicadas
de instalar en Centos: Pillow y psycopg2, por lo que tuvimos algunos
errores, para solucionarlos debemos instalar algunas librerias, en
centos en el caso de psycopg2 tenemos:</p>
<pre class="code bash"><a name="rest_code_1b810b42bed14a72851ff69a7401b26e-1"></a>yum install gcc
<a name="rest_code_1b810b42bed14a72851ff69a7401b26e-2"></a>yum install postgresql-devel python-devel
</pre>
<p>Y en el caso de Pillow:</p>
<pre class="code bash"><a name="rest_code_0cafba1d541a407db19e0d1b422204e0-1"></a>yum install libjpeg-devel zlib-devel
</pre>
<p>Y listo eso es todo, ya tenemos nuestro servidor de producción.</p>
<p>Saludos.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/01/26/romper-captchas-con-pytesseract-y-selenium/" class="u-url">Romper Captchas con Pytesseract y Selenium</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/01/26/romper-captchas-con-pytesseract-y-selenium/" rel="bookmark"><time class="published dt-published" datetime="2016-01-26T14:17:00-05:00" title="2016-01-26 14:17">2016-01-26 14:17</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>En muchas de las páginas que consultamos tenemos una imagen que
contiene un pequeño texto que generalmente es de 4 o de 6 letras, esta
imagen es conocida como captcha y sirve para evitar la consulta masiva
de datos y el uso de boots para hacer consultas, el problema radica en
que podemos convertir esta imagen en texto y buscar la forma de
ingresar estos datos de manera automática sin intervención humana.
Para hacer la conversión de la imagen en texto tenemos la librería
pytesseract que hace uso del programa tesseract-ocr y para el ingreso
automático de datos y el acceso a la página objetivo contamos con la
ayuda de nuestro viejo conocido selenium, cabe destacar que este
procedimiento funciona siempre y cuando la imagen del captcha no sea
tan complejo y contenga solamente texto.
Hemos creado un script de manera general sin tener una página objetivo
en específico, pero para aplicarlo se debe conocer bien la página a
testear tal como hemos explicado en posts anteriores, analizando sus
elementos y la ubicación del captcha.
Antes de empezar debemos tener instalado el programa tesseract-ocr ya
que no podremos hacer nada sin este, lo podemos descargar de la
siguiente <a class="reference external" href="http://en.osdn.jp/projects/sfnet_tesseract-ocr-alt/downloads/tesseract-ocr-setup-3.02.02.exe/">ubicación</a>.</p>
<p>Posteriormente procedemos a instalar las librerias pytesseract y
pillow(para el manejo y tratamiento de imágenes)</p>
<pre class="code bash"><a name="rest_code_42faaafe09434728a945aa3cb402d38f-1"></a>pip install pillow
<a name="rest_code_42faaafe09434728a945aa3cb402d38f-2"></a>pip install pytesseract
</pre>
<p>Y finalmente hacemos nuestro script el cual está debidamente
documentado para que lo puedan adaptar y modificar a su gusto.</p>
<pre class="code python"><a name="rest_code_5b71c93989bd4895af0aa65d73710f10-1"></a><span class="c1"># -*- coding: utf-8 -*-</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-2"></a><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-3"></a><span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-4"></a><span class="kn">from</span> <span class="nn">selenium.webdriver.support.wait</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-5"></a><span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-6"></a>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-7"></a><span class="k">try</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-8"></a>    <span class="kn">import</span> <span class="nn">Image</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-9"></a><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-10"></a>    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-11"></a><span class="kn">import</span> <span class="nn">pytesseract</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-12"></a>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-13"></a><span class="k">def</span> <span class="nf">ir_pagina_web</span><span class="p">(</span><span class="n">cadena</span><span class="p">,</span><span class="n">direccion_web</span><span class="p">):</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-14"></a>    <span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-15"></a>    <span class="c1">#Vamos a la dirección web de la página objetivo</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-16"></a>    <span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">direccion_web</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-17"></a>    <span class="k">try</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-18"></a>        <span class="c1">#Esperamos que se cargue correctamente la caja de texto de búsqueda</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-19"></a>        <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">"txtBusqueda"</span><span class="p">)))</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-20"></a>    <span class="k">except</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-21"></a>        <span class="k">print</span> <span class="s2">"El elemento no está presente"</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-22"></a>    <span class="c1">#Obtenemos la caja de texto de búsqueda</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-23"></a>    <span class="n">placa</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">"txtBusqueda"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-24"></a>    <span class="c1">#Enviamos la cadena a buscar en la caja de texto</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-25"></a>    <span class="n">placa</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">cadena</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-26"></a>    <span class="c1">#Hacemos una captura de pantalla de la página objetivo</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-27"></a>    <span class="n">driver</span><span class="o">.</span><span class="n">save_screenshot</span><span class="p">(</span><span class="s2">"screenshot.jpg"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-28"></a>    <span class="c1">#Abrimos la captura hecha</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-29"></a>    <span class="n">img</span><span class="o">=</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">'screenshot.jpg'</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-30"></a>    <span class="c1">#Recortamos la captura de acuerdo a la ubicación del captcha.</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-31"></a>    <span class="c1">#El primer argumento es la posición "x" inicial, el segundo la posición "y" inicial.</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-32"></a>    <span class="c1">#El tercer argumento es la posición "x" final y el cuarto la posición "y" final.</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-33"></a>    <span class="n">img_recortada</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">380</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">550</span><span class="p">,</span><span class="mi">340</span><span class="p">))</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-34"></a>    <span class="c1">#Guardamos el área seleccionada con el nombre de "recorte.jpg"</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-35"></a>    <span class="n">img_recortada</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">"recorte.jpg"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-36"></a>    <span class="k">try</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-37"></a>        <span class="c1">#Convertimos la imagen a cadena de texto usando la libreria pytesseract</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-38"></a>        <span class="n">captcha</span> <span class="o">=</span> <span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">(</span><span class="n">img_recortada</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-39"></a>        <span class="c1">#Obtenemos la caja de texto donde se ingresa el contenido del captcha</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-40"></a>        <span class="n">codigo</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">"txtCaptcha"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-41"></a>        <span class="c1">#Enviamos el captcha obtenido</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-42"></a>        <span class="n">codigo</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">captcha</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-43"></a>    <span class="k">except</span><span class="p">:</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-44"></a>        <span class="k">print</span> <span class="s2">"Error al convertir imagen en texto"</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-45"></a>    <span class="c1">#Obtenemos el botón buscar</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-46"></a>    <span class="n">boton</span><span class="o">=</span><span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_id</span><span class="p">(</span><span class="s2">"btn_buscar"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-47"></a>    <span class="c1">#Hacemos click en el botón</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-48"></a>    <span class="n">boton</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-49"></a>    <span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-50"></a>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-51"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-52"></a>    <span class="n">ir_pagina_web</span><span class="p">(</span><span class="s2">"cadena"</span><span class="p">,</span><span class="s2">"direccion_web"</span><span class="p">)</span>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-53"></a>
<a name="rest_code_5b71c93989bd4895af0aa65d73710f10-54"></a><span class="n">main</span><span class="p">()</span>
</pre>
<p>Por cierto hemos realizado esta prueba en Windows, nos queda la tarea
pendiente de hacerlo en GNU/Linux.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/01/25/web-scraping-con-selenium/" class="u-url">Web Scraping con Selenium</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/01/25/web-scraping-con-selenium/" rel="bookmark"><time class="published dt-published" datetime="2016-01-25T22:51:19-05:00" title="2016-01-25 22:51">2016-01-25 22:51</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>En entradas anteriores comentabamos sobre el uso de Selenium para hacer test, en esta oportunidad lo utilizaremos para extraer datos de una web en particular, ahora manos a la obra.<br>
Para hacer la extracción de datos primero necesitamos conocer bien la página web objetivo, en este caso es una página de consulta de datos de teléfonos de personas y empresas llamada “Páginas Blancas” su URL es la siguiente:<br>
http://www.paginasblancas.pe/</p>
<p>Y también debemos conocer el modo de funcionamiento de la página en cuestión, en este caso se debe ingresar la cadena a buscar en una caja de texto y presionar un botón que dice “Buscar” para enviar la consulta, si hay datos coincidentes con el texto ingresado, la página nos mostrará una lista de resultados que contienen la razón social o nombre, la dirección y el teléfono:</p>
<p>Búsqueda</p>
<p><a href="../2016/01/busqueda.png" rel="attachment wp-att-89"><img class="alignnone size-medium wp-image-89" src="https://pythonpiura.files.wordpress.com/2016/01/busqueda.png?w=300" alt="busqueda" width="300" height="102"></a></p>
<p>Resultados</p>
<p><a href="../2016/01/resultados.png" rel="attachment wp-att-90"><img class="alignnone size-medium wp-image-90" src="https://pythonpiura.files.wordpress.com/2016/01/resultados.png?w=300" alt="resultados" width="300" height="246"></a></p>
<p>Nos ayudaremos con las herramientas que tiene Firefox para poder identificar los elementos HTML de la página objetivo:<br><a href="../2016/01/herramientas.png" rel="attachment wp-att-86"><img class="alignnone size-medium wp-image-86" src="https://pythonpiura.files.wordpress.com/2016/01/herramientas.png?w=300" alt="Herramientas" width="300" height="88"></a></p>
<p>Empezamos identificando la caja de texto donde se envían los datos a consultar:</p>
<p><a href="../2016/01/caja.png" rel="attachment wp-att-87"><img class="alignnone size-medium wp-image-87" src="https://pythonpiura.files.wordpress.com/2016/01/caja.png?w=300" alt="caja" width="300" height="36"></a></p>
<p>Y el botón que ejecuta la consulta:</p>
<p><a href="../2016/01/boton.png" rel="attachment wp-att-88"><img class="alignnone size-medium wp-image-88" src="https://pythonpiura.files.wordpress.com/2016/01/boton.png?w=300" alt="boton" width="300" height="23"></a></p>
<p>Ahora que ya tenemos identificados estos elementos procedemos a escribir nuestro script en python:</p>
<p>[sourcecode language="python"]</p>
<p># -*- coding: utf-8 -*-<br>
from selenium import webdriver<br>
from selenium.webdriver.common.by import By<br>
from selenium.webdriver.support.wait import WebDriverWait<br>
from selenium.webdriver.support import expected_conditions as EC<br>
import os</p>
<p>def ir_paginas_blancas_web(cadena):<br>
    driver = webdriver.Firefox()<br>
    #Página a la que queremos acceder<br>
    driver.get("http://www.paginasblancas.pe")<br>
    lista_datos = []<br>
    try:<br>
        #Verificamos si el elemento con ID="nName" ya está cargado, este elemento es la caja de texto donde se hacen las busquedas<br>
        WebDriverWait(driver, 5).until(EC.presence_of_element_located((By.ID, "nName")))<br>
        #Obtenemos la caja de texto de busquedas<br>
        input_nombre = driver.find_element_by_id("nName")<br>
        #Enviamos la cadena que estamos buscando<br>
        input_nombre.send_keys(cadena)<br>
        #Obtenemos el botón que ejecuta la búsqueda<br>
        boton = driver.find_element_by_id("btnSrchName")<br>
        #Damos click al botón<br>
        boton.click()<br>
    except:<br>
        #Mostramos este mensaje en caso de que se presente algún problema<br>
        print "El elemento no está presente"<br>
    try:<br>
        #Si se encuentran resultados la página los muestra en elementos de nombre "m-results-business"<br>
        #Para ello esperamos que estos elementos se carguen para proceder a consultarlos<br>
        WebDriverWait(driver, 5).until(EC.presence_of_all_elements_located((By.CLASS_NAME, "m-results-business")))<br>
    except:<br>
        print ‘Elementos no encontrados’<br>
    #Obtenemos en una lista los elementos encontrados<br>
    resultados = driver.find_elements_by_class_name("m-results-business")<br>
    for resultado in resultados:<br>
        #En cada uno de los elementos encontrados buscamos un elemento interno que tiene por nombre info<br>
        datos = resultado.find_element_by_class_name("info")<br>
        #Dentro del elemento interno encontrado buscamos aquellos elementos que son enlaces(etiqueta &lt;a&gt;)<br>
        nombre = datos.find_element_by_tag_name(‘a’)<br>
        #Comprobamos si la cadena que buscamos coincide con la razón social o el nombre mostrado por la página<br>
        if nombre.text.upper().find(cadena)&lt;&gt;-1 or cadena.find(nombre.text.upper())&lt;&gt;-1:<br>
            #Obtenemos la parte de la dirección<br>
            span = datos.find_elements_by_tag_name(‘span’)<br>
            direccion = span[2].text<br>
            partes_ubigeo = span[3].text.split(‘-’)<br>
            distrito = partes_ubigeo[0].strip()<br>
            try:<br>
                departamento = partes_ubigeo[1].strip()<br>
            except:<br>
                departamento = ‘-’<br>
        #Obtenemos los Datos telefonicos para ello debemos simular el click en el botón que dice "Ver Teléfono"<br>
        boton_telefono = resultado.find_element_by_class_name("m-button–results-business–icon")<br>
        boton_telefono.click()<br>
        #Obtenemos los teléfonos que se muestran como enlaces<br>
        enlaces = resultado.find_elements_by_tag_name(‘a’)<br>
        telefono = enlaces[1].text.replace(‘ ‘, ”)<br>
        #Finalmente metemos en una lista de listas los datos obtenidos<br>
        lista_datos.append([direccion,distrito,departamento,telefono])</p>
<p>    driver.close()<br>
    return lista_datos</p>
<p>def main():<br>
    print ir_paginas_blancas_web(‘UNIVERSIDAD DE LIMA’)</p>
<p>main()</p>
<p>[/sourcecode]</p>
<p> </p>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/01/25/django-y-microsoft-sql-server/" class="u-url">Django y Microsoft SQL Server</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/01/25/django-y-microsoft-sql-server/" rel="bookmark"><time class="published dt-published" datetime="2016-01-25T15:38:02-05:00" title="2016-01-25 15:38">2016-01-25 15:38</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p style="text-align:justify;">Si por algún oscuro motivo necesitas conectar Django con Microsoft SQL Server, la solución la tiene el proyecto django-pyodbc-azure la información completa sobre el proyecto la encontrarán en su web oficial:<br>
https://github.com/michiya/django-pyodbc-azure<br>
La última versión del proyecto soporta Django 1.9.1 y Microsoft SQL Server 2005,2008/2008R2,2012,2014.<br>
Para empezar a trabajar debemos instalar de la siguiente forma:<br>
pip install django-pyodbc-azure</p>
<p style="text-align:justify;">Y luego configurar el archivo settings de nuestro proyecto, en la parte relacionada a la conexión a las bases de datos:</p>
<p>[sourcecode language="python"]<br>
DATABASES = {<br>
    ‘default’: {<br>
        ‘ENGINE’: ‘sql_server.pyodbc’,<br>
        ‘NAME’: ‘NOMBRE_BD’,<br>
        ‘USER’: ‘usuario’,<br>
        ‘PASSWORD’: ‘password’,<br>
        ‘HOST’: ‘IP_SERVIDOR_SQL_SERVER’,<br>
        ‘PORT’: ”,<br>
        ‘OPTIONS’: {<br>
            ‘driver’: ‘SQL Server Native Client 10.0′,<br>
            }<br>
    },<br>
}<br>
[/sourcecode]</p>
<p style="text-align:justify;">Y listo eso es todo, si desean conocer un poco mas este excelente proyecto remitanse a su página web.<br>
Saludos.</p>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2016/01/19/obtener-modulos-de-un-proyecto-y-vistas-de-una-aplicacion-en-django/" class="u-url">Obtener Módulos de un Proyecto y Vistas de una Aplicación en Django</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2016/01/19/obtener-modulos-de-un-proyecto-y-vistas-de-una-aplicacion-en-django/" rel="bookmark"><time class="published dt-published" datetime="2016-01-19T22:53:56-05:00" title="2016-01-19 22:53">2016-01-19 22:53</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>Debido a un requerimiento en un proyecto necesitabamos tener una página donde administrar todas las aplicaciones que hemos creado en nuestro proyecto Django y poder revisar que vistas(views) tiene cada uno de estas aplicaciones, para ello creamos una aplicación llamada permisos y una vista llamada AplicacionesProyecto de la siguiente manera:</p>
<p>[sourcecode language="python"]<br>
class AplicacionesProyecto(View):</p>
<p>def get(self, request, *args, **kwargs):<br>
    aplicaciones = [ app for app in miproyecto.settings.INSTALLED_APPS if not "django" in app ]<br>
    context={‘aplicaciones’:aplicaciones}<br>
    return render(request, ‘reporte_aplicaciones.html’,context)<br>
[/sourcecode]</p>
<p>Nuestro template se llama reporte_aplicaciones.html y tiene la siguiente estructura:</p>
<p>[sourcecode language="html"]<br>
{% extends "base_permisos.html" %}<br>
{% block titulo_opcion %}<br>
    Reporte de Aplicaciones<br>
{% endblock titulo_opcion %}<br>
{% block cuerpo_opcion %}<br>
&lt;table class="table table-striped"&gt;<br>
	&lt;tbhead&gt;<br>
		&lt;tr&gt;<br>
		&lt;th&gt;Nombre&lt;/th&gt;<br>
		&lt;th&gt;Vistas&lt;/th&gt;<br>
		&lt;/tr&gt;<br>
	&lt;/tbhead&gt;<br>
	&lt;tbody&gt;<br>
		{% for app in aplicaciones %}<br>
		&lt;tr&gt;<br>
			&lt;td&gt;{{ app }}&lt;/td&gt;<br>
			&lt;td&gt;<br>
				&lt;a class="btn btn-small" href="{% url ‘permisos:reporte_vistas’ app %}"&gt;<br>
					&lt;span class="glyphicon glyphicon-folder-open"&gt;&lt;/span&gt;<br>
				&lt;/a&gt;<br>
			&lt;/td&gt;<br>
		&lt;/tr&gt;<br>
		{% endfor %}<br>
	&lt;/tbody&gt;<br>
&lt;/table&gt;<br>
{% endblock cuerpo_opcion %}<br>
[/sourcecode]</p>
<p>La idea es obtener un listado de tal manera que al dar click en el enlace de cada uno de los módulos podamos ver las vistas(Views) que tiene cada una de las aplicaciones:</p>
<p>[sourcecode language="python"]<br>
class ReporteVistas(View):</p>
<p>	def get(self, request, *args, **kwargs):<br>
		aplicacion = self.kwargs['aplicacion']<br>
		lista_clases = []<br>
		for nombre_modulo,instancia_modulo in inspect.getmembers(sys.modules[aplicacion]):<br>
			if nombre_modulo==’views’:<br>
				codigo_fuente = inspect.getsource(instancia_modulo)<br>
				codigo_fuente = codigo_fuente.replace(" ", "")<br>
				for miembro in dir(instancia_modulo):<br>
					obj = getattr(instancia_modulo, miembro)<br>
					if inspect.isclass(obj):<br>
						cadena_clase = ‘class’ + miembro<br>
						if codigo_fuente.find(cadena_clase)&gt;=0:<br>
							lista_clases.append(miembro)<br>
		context={‘vistas’:lista_clases}<br>
		return render(request, ‘reporte_vistas_aplicacion.html’,context)<br>
[/sourcecode]</p>
<p>Nuestro template es reporte_vistas_aplicacion.html y tiene el siguiente contenido:</p>
<p>[sourcecode language="html"]<br>
{% extends "base_permisos.html" %}<br>
{% block titulo_opcion %}<br>
	Reporte de Vistas<br>
{% endblock titulo_opcion %}<br>
{% block cuerpo_opcion %}<br>
	{% for vista in vistas %}<br>
		{{ vista }}<br>
	{% endfor %}<br>
{% endblock cuerpo_opcion %}<br>
[/sourcecode]</p>
<p>Los urls respectivos son de la siguiente manera, archivo urls.py:</p>
<p>[sourcecode language="python"]<br>
url(r’^aplicaciones_proyecto’, login_required(AplicacionesProyecto.as_view()), name="aplicaciones_proyecto"),<br>
url(r’^reporte_vistas/(?P&lt;aplicacion&gt;.+)/$’, login_required(ReporteVistas.as_view()), name="reporte_vistas"),<br>
[/sourcecode]</p>
<p>Así de esta manera tenemos un procedimiento un tanto rudimentario pero útil con el que obtenemos, las aplicaciones de nuestro proyecto y las vistas de cada una de ellas.<br>
Hasta la próxima.</p>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2014/09/18/selenium-con-python/" class="u-url">Selenium con Python</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2014/09/18/selenium-con-python/" rel="bookmark"><time class="published dt-published" datetime="2014-09-18T01:15:18-05:00" title="2014-09-18 01:15">2014-09-18 01:15</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p style="text-align:justify;">Buenas noches estimados amigos en esta oportunidad vamos a trabajar con Selenium, esta excelente herramienta que nos permite testear nuestras aplicaciones web actuando como si lo hiciera un usuario final que interactúa con nuestra aplicación, la primera vez que la probé me sorprendí gratamente porque no sabía de la existencia de una herramienta tan interesante, bueno manos a la obra, para instalar selenium con Python debemos usar nuestra querida herramienta pip de la siguiente manera:</p>
<p>[sourcecode language="bash"]<br>
    sudo pip install selenium<br>
[/sourcecode]<br>
Si tuviésemos configurado un entorno virtual simplemente trabajaríamos así:</p>
<p>[sourcecode language="python"]<br>
    pip install selenium<br>
[/sourcecode]</p>
<p style="text-align:justify;">Con esto ya tendremos instalada esta excelente aplicación, si por algún motivo tuviesen algún error o ya tuviesen instalado selenium y quieren actualizarlo deben poner lo siguiente en su terminal:</p>
<p>[sourcecode language="python"]<br>
    pip install selenium –upgrade<br>
[/sourcecode]<br>
Para probar su funcionamiento debemos tipear este ejemplo bastante simple:</p>
<p>[sourcecode language="python"]<br>
    #Importamos el módulo webdriver que nos permite interactuar con nuestro navegador<br>
    from selenium import webdriver<br>
    #Importamos la clase Keys que provee las teclas RETURN, F1, ALT, etc de nuestro teclado<br>
    from selenium.webdriver.common.keys import Keys<br>
    #Creamos una instancia de Firefox webdriver para poder usar el navegador firefox en esta prueba<br>
    driver = webdriver.Firefox()<br>
    #El método get permite navegar hacia un enlace determinado en este caso la página de Python.org<br>
    #WebDriver esperará hasta que la página esté cargada<br>
    driver.get("http://www.python.org")<br>
    #En esta línea confirmaremos si el título tiene la palabra Python<br>
    assert "Python" in driver.title<br>
    #WebDriver ofrece varias maneras de encontrar los elementos de una página web<br>
    #En este ejemplo queremos encontrar el elemento que tenga como atributo name la letra "q"(es la barra de busqueda de la página)<br>
    elem = driver.find_element_by_name("q")<br>
    #Como ya localizamos el elemento y sabemos que es una caja de texto, vamos a escribir en ella la palabra "selenium"<br>
    elem.send_keys("selenium")<br>
    #Y finalmente enviaremos la busqueda pulsando la tecla RETURN<br>
    elem.send_keys(Keys.RETURN)<br>
    #Cerramos el navegador<br>
    driver.close()<br>
[/sourcecode]</p>
<p style="text-align:justify;">Verán que cuando ejecuten el script demorará un poquito pero nos mostrará una ventana de Firefox, posteriormente cargará la página de Python.org y en la caja de busqueda escribirá la palabra “selenium” para finalmente cerrar el navegador que había abierto culminando la ejecución del script.</p>
<p style="text-align:justify;">Esperemos que este pequeño post sea de gran utilidad para ustedes queridos lectores y si tuviesen algún problema al ejecutar el script por favor nos avisan.</p>
<p>Saludos.</p>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2014/09/14/python-y-la-vision-artificial/" class="u-url">Python y la Visión Artificial.</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2014/09/14/python-y-la-vision-artificial/" rel="bookmark"><time class="published dt-published" datetime="2014-09-14T18:30:22-05:00" title="2014-09-14 18:30">2014-09-14 18:30</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>Primer aporte de un integrante de nuestra comunidad. Pronto más sobre la documentación de éste framework #OpenCV.</p>
<p>https://www.youtube.com/watch?v=e76GpOqm7IM&amp;list=UUuLRypAG4kX9igBcGSQ0xEQ</p>

    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="../posts/2014/05/23/primeros-pasos-con-django/" class="u-url">Primeros Pasos con Django</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                Comunidad Python Piura
            </span></p>
            <p class="dateline"><a href="../posts/2014/05/23/primeros-pasos-con-django/" rel="bookmark"><time class="published dt-published" datetime="2014-05-23T00:43:50-05:00" title="2014-05-23 00:43">2014-05-23 00:43</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>Buenas noches en esta oportunidad les damos a conocer nuestro primer manual de Django con el que empezaremos a aprender este excepcional framework, esperamos que les guste y que pueda serles de utilidad.</p>
<p><a title="Primeros Pasos con Django" href="http://elclickizquierdo.files.wordpress.com/2014/05/manual_django_circulo_python.pdf">Descargar archivo</a></p>

    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2.html" rel="prev">Publicaciones posteriores</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:pythonpiura@openmailbox.org">Comunidad Python Piura</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-es.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("es");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76551557-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
