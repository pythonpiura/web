<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0"><channel><title>Python Piura (Python)</title><link>http://pythonpiura.org/</link><description></description><atom:link rel="self" href="http://pythonpiura.org/categories/python.xml" type="application/rss+xml"></atom:link><language>es</language><lastBuildDate>Fri, 07 Oct 2016 23:26:11 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Reporte PDF en Django con Reportlab</title><link>http://pythonpiura.org/posts/2016/05/13/reporte-pdf-en-django-con-reportlab/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;Vamos a retomar nuestro proyecto tutorial, al que hemos tenido
bastante olvidado estos últimos días y haremos un reporte en pdf
utilizando la librería &lt;a class="reference external" href="http://www.reportlab.com/"&gt;reportlab&lt;/a&gt;, para ello la instalamos:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_13527231d4a5419c93ddc7424ecc9a31-1"&gt;&lt;/a&gt;pip install reportlab
&lt;/pre&gt;&lt;p&gt;Lo primero que haremos es poner el logo de django en la parte superior
de nuestro reporte, por lo que debemos tener la imagen guardada en una
ubicación fácil de obtener, por eso crearemos una carpeta llamada
“media” en nuestro proyecto y dentro de esta, otra carpeta llamada
imagenes, es aquí donde pondremos nuestro archivo logo_django.png:&lt;/p&gt;
&lt;img alt="/images/blog/ubicacion_logo.jpg" src="http://pythonpiura.org/images/blog/ubicacion_logo.jpg"&gt;
&lt;p&gt;Modificamos el archivo settings.py para poder establecer la ruta de la
carpeta media:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_92f41481ec9a4d2e9f6dba193779e716-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;MEDIA_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'media'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Creamos la clase ReportePersonasPDF en el archivo views.py, el código
está explicado en los comentarios:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Importamos settings para poder tener a la mano la ruta de la carpeta media&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.conf&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;io&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;BytesIO&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;reportlab.pdfgen&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.views.generic&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ReportePersonasPDF&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;cabecera&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-10"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Utilizamos el archivo logo_django.png que está guardado en la carpeta media/imagenes&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-11"&gt;&lt;/a&gt;        &lt;span class="n"&gt;archivo_imagen&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MEDIA_ROOT&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="s1"&gt;'/imagenes/logo_django.png'&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-12"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Definimos el tamaño de la imagen a cargar y las coordenadas correspondientes&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-13"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;archivo_imagen&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;750&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;120&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;preserveAspectRatio&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-14"&gt;&lt;/a&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-15"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-16"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Indicamos el tipo de contenido a devolver, en este caso un pdf&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-17"&gt;&lt;/a&gt;        &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'application/pdf'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-18"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#La clase io.BytesIO permite tratar un array de bytes como un fichero binario, se utiliza como almacenamiento temporal&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-19"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;buffer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BytesIO&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-20"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Canvas nos permite hacer el reporte con coordenadas X y Y&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-21"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Canvas&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-22"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Llamo al método cabecera donde están definidos los datos que aparecen en la cabecera del reporte.&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-23"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cabecera&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-24"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Con show page hacemos un corte de página para pasar a la siguiente&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-25"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;showPage&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-26"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-27"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getvalue&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-28"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-29"&gt;&lt;/a&gt;        &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_d2608f31c000444cbe7b613d282bbf91-30"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Para poder acceder a esta clase debemos hacer la creación de la url
correspondiente en el archivo urls.py:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_25383995340c4d558697e6d82dd0112f-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;r'^reporte_personas_pdf/$'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;login_required&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ReportePersonasPDF&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_view&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"reporte_personas_pdf"&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Ahora vamos a utilizar la url desde el archivo personas.html:&lt;/p&gt;
&lt;pre class="code html"&gt;&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'form-group'&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-2"&gt;&lt;/a&gt;    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"row"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-3"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"col-lg-9"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-5"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-6"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"col-lg-1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-7"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"{% url 'personas:reporte_personas_excel' %}"&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"btn btn-info btn-block"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-8"&gt;&lt;/a&gt;                &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"glyphicon glyphicon-list-alt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-9"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-10"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-11"&gt;&lt;/a&gt;        {% if perms.personas.add_persona %}
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-12"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"col-lg-1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-13"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"{% url 'personas:crear_persona' %}"&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"btn btn-info btn-block"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-14"&gt;&lt;/a&gt;                &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"glyphicon glyphicon-plus"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-15"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-16"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-17"&gt;&lt;/a&gt;        {% endif %}
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-18"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"col-lg-1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-19"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"{% url 'personas:reporte_personas_pdf' %}"&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"btn btn-info btn-block"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-20"&gt;&lt;/a&gt;                &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"glyphicon glyphicon-file"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-21"&gt;&lt;/a&gt;            &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-22"&gt;&lt;/a&gt;        &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-23"&gt;&lt;/a&gt;    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b72bf9d87de2466aa62d45c3dd70a23a-24"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Nos tiene que aparecer un ícono de un archivo:&lt;/p&gt;
&lt;img alt="/images/blog/personas_pdf.jpg" src="http://pythonpiura.org/images/blog/personas_pdf.jpg"&gt;
&lt;p&gt;El primer resultado será este:&lt;/p&gt;
&lt;img alt="/images/blog/reporte_pdf1.jpg" src="http://pythonpiura.org/images/blog/reporte_pdf1.jpg"&gt;
&lt;p&gt;Vamos a ponerle un encabezado a nuestro reporte que diga “Python
Piura” y debajo “Reporte de Personas”, para ello colocamos el
siguiente código debajo de la última linea del método “cabecera”:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Establecemos el tamaño de letra en 16 y el tipo de letra Helvetica&lt;/span&gt;
&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setFont&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Helvetica"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-3"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Dibujamos una cadena en la ubicación X,Y especificada&lt;/span&gt;
&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;230&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;790&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;u"PYTHON PIURA"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setFont&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Helvetica"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_8b075459fed94bb1adf6fe764d69635f-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;770&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;u"REPORTE DE PERSONAS"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;img alt="/images/blog/reporte_pdf2.jpg" src="http://pythonpiura.org/images/blog/reporte_pdf2.jpg"&gt;
&lt;p&gt;Visualizaremos la tabla de personas, por lo que creamos el método
tabla en la clase ReportePersonasPDF:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;tabla&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-2"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Creamos una tupla de encabezados para neustra tabla&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-3"&gt;&lt;/a&gt;        &lt;span class="n"&gt;encabezados&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'DNI'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Nombre'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Apellido Paterno'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Apellido Materno'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-4"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Creamos una lista de tuplas que van a contener a las personas&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-5"&gt;&lt;/a&gt;        &lt;span class="n"&gt;detalles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dni&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;nombre&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apellido_paterno&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apellido_materno&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;persona&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;Persona&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()]&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-6"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Establecemos el tamaño de cada una de las columnas de la tabla&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;detalle_orden&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Table&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;encabezados&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;detalles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colWidths&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Aplicamos estilos a las celdas de la tabla&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-9"&gt;&lt;/a&gt;        &lt;span class="n"&gt;detalle_orden&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setStyle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TableStyle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-10"&gt;&lt;/a&gt;        &lt;span class="p"&gt;[&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-11"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#La primera fila(encabezados) va a estar centrada&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-12"&gt;&lt;/a&gt;                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'ALIGN'&lt;/span&gt;&lt;span class="p"&gt;,(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s1"&gt;'CENTER'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-13"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Los bordes de todas las celdas serán de color negro y con un grosor de 1&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-14"&gt;&lt;/a&gt;                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'GRID'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;black&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-15"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#El tamaño de las letras de cada una de las celdas será de 10&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-16"&gt;&lt;/a&gt;                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'FONTSIZE'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-17"&gt;&lt;/a&gt;                &lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-18"&gt;&lt;/a&gt;        &lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-19"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Establecemos el tamaño de la hoja que ocupará la tabla&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-20"&gt;&lt;/a&gt;        &lt;span class="n"&gt;detalle_orden&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wrapOn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;800&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-21"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Definimos la coordenada donde se dibujará la tabla&lt;/span&gt;
&lt;a name="rest_code_ff3cb90a32c84c3d8025dbe5e4a2a56c-22"&gt;&lt;/a&gt;        &lt;span class="n"&gt;detalle_orden&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawOn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Veamos como queda nuestro método get ahora con la nueva llamada al
método tabla:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-2"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Indicamos el tipo de contenido a devolver, en este caso un pdf&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-3"&gt;&lt;/a&gt;        &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HttpResponse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'application/pdf'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-4"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#La clase io.BytesIO permite tratar un array de bytes como un fichero binario, se utiliza como almacenamiento temporal&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-5"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;buffer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BytesIO&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-6"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Canvas nos permite hacer el reporte con coordenadas X y Y&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Canvas&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Llamo al método cabecera donde están definidos los datos que aparecen en la cabecera del reporte.&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-9"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cabecera&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-10"&gt;&lt;/a&gt;        &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-11"&gt;&lt;/a&gt;        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tabla&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-12"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Con show page hacemos un corte de página para pasar a la siguiente&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-13"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;showPage&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-14"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-15"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getvalue&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-16"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;buffer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-17"&gt;&lt;/a&gt;        &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_373e653f77774bdeac488c75e5e18b29-18"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Y este será el resultado final:&lt;/p&gt;
&lt;img alt="/images/blog/reporte_pdf3.jpg" src="http://pythonpiura.org/images/blog/reporte_pdf3.jpg"&gt;
&lt;p&gt;Eso es todo por hoy.
Saludos.&lt;/p&gt;&lt;/div&gt;</description><category>Django</category><category>Python</category><category>reportlab</category><guid>http://pythonpiura.org/posts/2016/05/13/reporte-pdf-en-django-con-reportlab/</guid><pubDate>Sat, 14 May 2016 02:58:34 GMT</pubDate></item><item><title>Consulta DNI - RENIEC</title><link>http://pythonpiura.org/posts/2016/05/11/consulta-dni-reniec/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;En esta oportunidad vamos a hacer un ejemplo mas complejo, ya que el
captcha así lo amerita, nuestra página objetivo es la siguiente:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://cel.reniec.gob.pe/valreg/valreg.do"&gt;https://cel.reniec.gob.pe/valreg/valreg.do&lt;/a&gt;&lt;/p&gt;
&lt;img alt="/images/blog/reniec.jpg" src="http://pythonpiura.org/images/blog/reniec.jpg"&gt;
&lt;p&gt;En esta página podemos ingresar el número de DNI y obtener el nombre
completo del ciudadano. Como se ve en la imagen aquí nos enfrentamos a
un captcha mas completo y a un teclado dinámico compuesto de botones,
para romper este captcha tenemos que modificar la imagen para obtener
el texto correcto, eliminando las lineas que atraviesan las letras y
que tienen una tonalidad distinta de azul, el proceso no será 100%
seguro pero funciona en la mayoría de los casos:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.common.by&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;By&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support.wait&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;expected_conditions&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;EC&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-8"&gt;&lt;/a&gt;        &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ImportError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-10"&gt;&lt;/a&gt;        &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;PIL&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-11"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytesseract&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-13"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;ir_reniec_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dni&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-14"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FirefoxProfile&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-15"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Firefox&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-16"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Definimos nuestra página objetivo&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-17"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"https://cel.reniec.gob.pe/valreg/valreg.do"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-18"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-19"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Esperamos hasta que se cargue la imagen con el captcha&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-20"&gt;&lt;/a&gt;                &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;until&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;presence_of_element_located&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;By&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"imagcodigo"&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-21"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-22"&gt;&lt;/a&gt;                &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Element is not present"&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-23"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Hacemos la captura de pantalla correspondiente&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-24"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save_screenshot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"screenshot.png"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-25"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'screenshot.png'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-26"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Obtenemos el ancho y el largo de la imagen&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-27"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ancho&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-28"&gt;&lt;/a&gt;        &lt;span class="n"&gt;alto&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-29"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Recortamos la parte del captcha teniendo en cuenta el ancho y el largo de la imagen&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-30"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img_recortada&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crop&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ancho&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;4.26&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alto&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;3.64&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ancho&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mf"&gt;2.8&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;alto&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-31"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Guardamos el recorte&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-32"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img_recortada&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"recorte.png"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-33"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Recorremos cada uno de los dígitos del DNI&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-34"&gt;&lt;/a&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;dni&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-35"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_0&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-36"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_0"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-37"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_0&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-38"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-39"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_1&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-40"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_1"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-41"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_1&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-42"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-43"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_2&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-44"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_2"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-45"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_2&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-46"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-47"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_3&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-48"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_3"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-49"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_3&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-50"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-51"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_4&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-52"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_4"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-53"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_4&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-54"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-55"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_5&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-56"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_5&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_5"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-57"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_5&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-58"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_5&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-59"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_6&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-60"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_6&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_6"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-61"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_6&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-62"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_6&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-63"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_7&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-64"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_7&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_7"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-65"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_7&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-66"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_7&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-67"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_8&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-68"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_8&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_8"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-69"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_8&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-70"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_8&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-71"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Buscamos el boton que tenga como nombre tecla_9&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-72"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_9&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_9"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-73"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el valor del botón con nombre tecla_9&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-74"&gt;&lt;/a&gt;                &lt;span class="n"&gt;valor_9&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;boton_9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_attribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'value'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-75"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Consultamos si el dígito del DNI es igual al valor del botón, si es el caso entonces se da click en ese botón&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-76"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-77"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-78"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-79"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_1"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-80"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-81"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-82"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_2"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-83"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-84"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-85"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_3"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-86"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_3&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-87"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-88"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_4"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-89"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-90"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-91"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_5&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_5"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-92"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_5&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-93"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-94"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_6&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_6"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-95"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-96"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-97"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_7&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_7"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-98"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-99"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-100"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_8&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_8"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-101"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_8&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-102"&gt;&lt;/a&gt;        &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;valor_9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-103"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_9&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tecla_9"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-104"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-105"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Se llama al método romper_captcha para obtener el texto correspondiente&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-106"&gt;&lt;/a&gt;        &lt;span class="n"&gt;captcha&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;romper_captcha&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"recorte.png"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-107"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-108"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos la caja de texto donde se escribe el texto del captcha&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-109"&gt;&lt;/a&gt;                &lt;span class="n"&gt;codigo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"imagen"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-110"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Si el captcha está vacio o no se ha logrado romper se cierra el navegador y se termina la aplicación&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-111"&gt;&lt;/a&gt;                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;captcha&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-112"&gt;&lt;/a&gt;                        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-113"&gt;&lt;/a&gt;                        &lt;span class="k"&gt;return&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-114"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Escribimos el texto&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-115"&gt;&lt;/a&gt;                &lt;span class="n"&gt;codigo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;captcha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-116"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-117"&gt;&lt;/a&gt;                &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-118"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-119"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Obtenemos el botón de consulta&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-120"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_consultar&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"bot_consultar"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-121"&gt;&lt;/a&gt;                &lt;span class="c1"&gt;#Damos click al botón de consulta&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-122"&gt;&lt;/a&gt;                &lt;span class="n"&gt;boton_consultar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-123"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-124"&gt;&lt;/a&gt;                &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Element is not present"&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-125"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Obtengo el resultado que aparece en el elemento llamado style2&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-126"&gt;&lt;/a&gt;        &lt;span class="n"&gt;resultado&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_class_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"style2"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-127"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Partimos el resultado para obtener el nombre&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-128"&gt;&lt;/a&gt;        &lt;span class="n"&gt;nombre&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;resultado&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-129"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-130"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nombre&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-131"&gt;&lt;/a&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-132"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;romper_captcha&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nombre_imagen&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-133"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Abro la imagen&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-134"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nombre_imagen&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-135"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Obtengo un arreglo de píxeles de la imagen&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-136"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pixdata&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-137"&gt;&lt;/a&gt;        &lt;span class="sd"&gt;"""Modifico los píxeles de la imagen de acuerdo al análisis de los&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-138"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        colores de las letras y las lineas que cruzan el texto, pintando de negro los píxeles del&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-139"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        texto y de blanco las lineas"""&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-140"&gt;&lt;/a&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-141"&gt;&lt;/a&gt;                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-142"&gt;&lt;/a&gt;                        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;pixdata&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;146&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-143"&gt;&lt;/a&gt;                                &lt;span class="n"&gt;pixdata&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-144"&gt;&lt;/a&gt;        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-145"&gt;&lt;/a&gt;                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-146"&gt;&lt;/a&gt;                        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;pixdata&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;     &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-147"&gt;&lt;/a&gt;                                &lt;span class="n"&gt;pixdata&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-148"&gt;&lt;/a&gt;                        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-149"&gt;&lt;/a&gt;                                &lt;span class="n"&gt;pixdata&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-150"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Guardo la imagen modificada&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-151"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"modificado.jpg"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-152"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Abro la imagen modificado&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-153"&gt;&lt;/a&gt;        &lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"modificado.jpg"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-154"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Obtenemos el texto de la imagen&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-155"&gt;&lt;/a&gt;        &lt;span class="n"&gt;frase&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytesseract&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;image_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-156"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Retornamos el texto eliminado los espacios en blanco entre las palabras y convirtiendolas en mayúsculas&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-157"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;frase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;' '&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-158"&gt;&lt;/a&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-159"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-160"&gt;&lt;/a&gt;        &lt;span class="n"&gt;dni&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'123456789'&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-161"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;ir_reniec_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dni&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-162"&gt;&lt;/a&gt;
&lt;a name="rest_code_1c67b3fa95ee4702baaa71602a4dfa4b-163"&gt;&lt;/a&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Espero que les sea útil.
Saludos.&lt;/p&gt;&lt;/div&gt;</description><category>pillow</category><category>pytesseract</category><category>Python</category><category>Selenium</category><guid>http://pythonpiura.org/posts/2016/05/11/consulta-dni-reniec/</guid><pubDate>Thu, 12 May 2016 02:37:08 GMT</pubDate></item><item><title>Web Scrapping con Python y Selenium</title><link>http://pythonpiura.org/posts/2016/05/07/web-scrapping-con-python-y-selenium/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;El día de hoy tuvimos el agrado de ser invitados por el &lt;a class="reference external" href="https://cideuel.wordpress.com/"&gt;Círculo UEL&lt;/a&gt;
a dar una charla en el marco del FLISOL 2016 en la Universidad Los
Ángeles de Chimbote Sede Piura y el tema fue Web Scrapping con Python
y Selenium, hicimos algunos ejemplos muy interesantes y nos encantó la
acogida del público y el interés suscitado, vamos a compartir los
artículos que usamos:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://pythonpiura.wordpress.com/2014/09/18/selenium-con-python/"&gt;Selenium con Python&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://pythonpiura.wordpress.com/2016/01/26/romper-captchas-con-pytesseract-y-selenium/"&gt;Romper Captchas con Pytesseract y Selenium&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Las diapositivas:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://pythonpiura.org/recursos/charlapythonflisol2016.pdf"&gt;Descargar&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;El script que fue la estrella de la mañana:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.common.by&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;By&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support.wait&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;expected_conditions&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;EC&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-6"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-9"&gt;&lt;/a&gt;        &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ImportError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-11"&gt;&lt;/a&gt;        &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;PIL&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-12"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytesseract&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-14"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decodifica_campo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;campo&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-15"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;u"&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;campo&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-16"&gt;&lt;/a&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-17"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;ir_sunat_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ruta&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-18"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FirefoxProfile&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-19"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_preference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"browser.download.manager.showWhenStarting"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-20"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_preference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"browser.download.manager.closeWhenDone"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-21"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_preference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"browser.download.manager.showAlertOnComplete"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-22"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_preference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"browser.helperApps.neverAsk.saveToDisk"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"application/zip"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-23"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Firefox&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-24"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"http://www.sunat.gob.pe/cl-ti-itmrconsmulruc/jrmS00Alias"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-25"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-26"&gt;&lt;/a&gt;                &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;until&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;presence_of_element_located&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;By&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NAME&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"imagen"&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-27"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-28"&gt;&lt;/a&gt;                &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"No carga imagen"&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-29"&gt;&lt;/a&gt;        &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save_screenshot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"screenshot.png"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-30"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'screenshot.png'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-31"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img_recortada&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crop&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;700&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;309&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;800&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;361&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-32"&gt;&lt;/a&gt;        &lt;span class="n"&gt;img_recortada&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"recorte.png"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-33"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-34"&gt;&lt;/a&gt;                &lt;span class="n"&gt;captcha&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytesseract&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;image_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img_recortada&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-35"&gt;&lt;/a&gt;                &lt;span class="n"&gt;codigo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"codigoA"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-36"&gt;&lt;/a&gt;                &lt;span class="n"&gt;codigo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;captcha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-37"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-38"&gt;&lt;/a&gt;                &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-39"&gt;&lt;/a&gt;        &lt;span class="n"&gt;archivo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"archivo"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-40"&gt;&lt;/a&gt;        &lt;span class="n"&gt;archivo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ruta&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-41"&gt;&lt;/a&gt;        &lt;span class="n"&gt;form&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"frmConsMulRucArchivo"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-42"&gt;&lt;/a&gt;        &lt;span class="n"&gt;botones&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;form&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_elements_by_class_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"form-button"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-43"&gt;&lt;/a&gt;        &lt;span class="n"&gt;botones&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-44"&gt;&lt;/a&gt;        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-45"&gt;&lt;/a&gt;                &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;until&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;presence_of_all_elements_located&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;By&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CLASS_NAME&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"form-table"&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-46"&gt;&lt;/a&gt;                &lt;span class="n"&gt;enlace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;By&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TAG_NAME&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;"a"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-47"&gt;&lt;/a&gt;                &lt;span class="n"&gt;enlace&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-48"&gt;&lt;/a&gt;        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-49"&gt;&lt;/a&gt;                &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Element is not present"&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-50"&gt;&lt;/a&gt;                &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-51"&gt;&lt;/a&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-52"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-53"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ruta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"/home/usuario/carpeta"&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-54"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ruta_archivo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ruta&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;"rucs.zip"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-55"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ir_sunat_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ruta_archivo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-56"&gt;&lt;/a&gt;
&lt;a name="rest_code_927ded3618d14e56acf56703e4accbba-57"&gt;&lt;/a&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Así como también un vídeo de su funcionamiento.&lt;/p&gt;
&lt;div class="youtube-video"&gt;
&lt;iframe width="425" height="344" src="https://www.youtube.com/embed/mUaVFYTlibM?rel=0&amp;amp;hd=1&amp;amp;wmode=transparent"&gt;&lt;/iframe&gt;
&lt;/div&gt;&lt;p&gt;Saludos y muchas gracias.&lt;/p&gt;&lt;/div&gt;</description><category>pillow</category><category>pytesseract</category><category>Python</category><category>Selenium</category><guid>http://pythonpiura.org/posts/2016/05/07/web-scrapping-con-python-y-selenium/</guid><pubDate>Sun, 08 May 2016 01:58:06 GMT</pubDate></item><item><title>Deployando Proyectos Django en Heroku</title><link>http://pythonpiura.org/posts/2016/04/17/deployando-proyectos-django-en-heroku/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.heroku.com/"&gt;Heroku&lt;/a&gt; es una plataforma que brinda servicios en la nube y soporta
varios lenguajes de programación, funciona muy bien con Python y
Django y en esta ocasión haremos un pequeño tutorial basado en el
tutorial oficial, que se puede encontrar en la página del proyecto.
Para empezar a trabajar debemos tener una cuenta en Heroku, hay planes
de varios tipos, nosotros escogeremos el plan Free. Antes de empezar
nos vamos a cerciorar de tener instaladas algunas cosas básicas, que
ya hemos visto antes pero que siempre es bueno recordar:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Pip.&lt;/li&gt;
&lt;li&gt;Virtualenv&lt;/li&gt;
&lt;li&gt;Git.&lt;/li&gt;
&lt;li&gt;Y en nuestro caso la base de datos PostgreSQL.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El primer paso es instalar Heroku Toolbelt, esta aplicación provee
acceso a la interfaz de linea de comandos(CLI) de Heroku, que es usada
para administrar y escalar nuestras aplicaciones y sus añadidos, para
tenerlo instalado debemos poner el siguiente comando en nuestra
terminal:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_1026bbe8aa1d49af8022c2cd39fb9dcf-1"&gt;&lt;/a&gt;wget -O- https://toolbelt.heroku.com/install-ubuntu.sh &lt;span class="p"&gt;|&lt;/span&gt; sh
&lt;/pre&gt;&lt;p&gt;El script nos pedira permisos de superusuario para continuar, se los
damos y esperamos que la instalación se efectue.&lt;/p&gt;
&lt;p&gt;Una vez que hemos terminado de instalar debemos loguearnos utilizando
el usuario y password que hemos registrado en la página de Heroku de
la siguiente manera:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_8a423dd515c44b759ca20b534b039295-1"&gt;&lt;/a&gt;heroku login
&lt;/pre&gt;&lt;p&gt;Si es la primera vez que lanzamos la aplicación se demorará un poquito
instalando y configurando todo lo necesario, despues nos pedirá
usuario y password, si ingresamos las credenciales correctamente nos
saldrá un mensaje como este:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_2824ba2dae6945a6bba4b60950815fe8-1"&gt;&lt;/a&gt;Logged in as miguel.amaya99@gmail.com
&lt;/pre&gt;&lt;p&gt;Una vez que hemos hecho esto el manual oficial de Heroku nos indica
que debemos clonar una aplicación de prueba para deployar, nosotros ya
tenemos una aplicación desarrollada por lo que debemos hacer algunos
cambios a esta para poder subirla sin ningún problema.&lt;/p&gt;
&lt;p&gt;Primero debemos agregar dos archivos en la raiz del proyecto:&lt;/p&gt;
&lt;p&gt;El archivo procfile que debe tener el siguiente contenido:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_80b7a3286684407481d529ff2403070e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;web&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;gunicorn&lt;/span&gt; &lt;span class="n"&gt;volpox&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wsgi&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;En la parte donde dice “volpox.wsgi” se debe reemplazar por el nombre
de su proyecto.&lt;/p&gt;
&lt;p&gt;El archivo requirements.txt debe tener todos las aplicaciones que
nuestro proyecto necesita para funcionar correctamente, esto se puede
averiguar facilmente ejecutando el comando pip freeze y guardando su
contenido en el archivo, en nuestro caso el contenido del archivo es
el siguiente:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;dj&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mf"&gt;0.4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;Django&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mf"&gt;1.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;gunicorn&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mf"&gt;19.4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;
&lt;a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;psycopg2&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mf"&gt;2.6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;a name="rest_code_5c967c2cd6e143c6b3bc8a1a199d109f-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;whitenoise&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mf"&gt;2.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Debemos tener en cuenta que este es el contenido básico para
garantizar el correcto funcionamiento de nuestra aplicación en Heroku,
hemos adicionado el paquete psycopg2 para poder trabajar con
postgresql, si su proyecto usa algún paquete de software adicional,
póngalo en este archivo.&lt;/p&gt;
&lt;p&gt;Ahora debemos modificar el archivo settings.py agregando las
siguientes lineas:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Al inicio&lt;/span&gt;
&lt;a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;dj_database_url&lt;/span&gt;
&lt;a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_13e28f2b11c5437a85584d93d6fc8905-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;PROJECT_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dirname&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abspath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__file__&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;En la parte donde está:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_26704d4034324ed89c6aa77e075da4be-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;ALLOWED_HOSTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Lo cambiamos por:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_e4655541dc2d475799eeb9a72b78d53e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;ALLOWED_HOSTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'*'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;En la parte final agregamos esto:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;db_from_env&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dj_database_url&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;conn_max_age&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;DATABASES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'default'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db_from_env&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-4"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Honor the 'X-Forwarded-Proto' header for request.is_secure()&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;SECURE_PROXY_SSL_HEADER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'HTTP_X_FORWARDED_PROTO'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'https'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-6"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Static files (CSS, JavaScript, Images)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-7"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# https://docs.djangoproject.com/en/1.8/howto/static-files/&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-9"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATIC_ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PROJECT_ROOT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'staticfiles'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-10"&gt;&lt;/a&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-11"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATIC_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'/static/'&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-13"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# Extra places for collectstatic to find static files.&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-14"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATICFILES_DIRS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-15"&gt;&lt;/a&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BASE_DIR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'static'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-16"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-17"&gt;&lt;/a&gt;&lt;span class="n"&gt;STATICFILES_STORAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;a name="rest_code_4939c9e8213c481d82669f6e965eaa29-18"&gt;&lt;/a&gt;&lt;span class="s1"&gt;'whitenoise.django.GzipManifestStaticFilesStorage'&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Ahora debemos cambiar el contenido del archivo wsgi.py&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setdefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"DJANGO_SETTINGS_MODULE"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"volpox.settings"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.core.wsgi&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;get_wsgi_application&lt;/span&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;whitenoise.django&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;DjangoWhiteNoise&lt;/span&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;application&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_wsgi_application&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_9de6b20bd611417f80e19b8e0e6c5668-8"&gt;&lt;/a&gt;&lt;span class="n"&gt;application&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DjangoWhiteNoise&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;También debemos crear un archivo .gitignore, que es usado por git para
no trabajar con las extensiones de archivos mencionados aquí en
nuestro caso serán las siguientes:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;venv&lt;/span&gt;
&lt;a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;*.&lt;/span&gt;&lt;span class="n"&gt;pyc&lt;/span&gt;
&lt;a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;staticfiles&lt;/span&gt;
&lt;a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;
&lt;a name="rest_code_506f1db4b9d049438b16bacfd0a7cc1e-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqlite3&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Ahora debemos crear un repositorio git con el siguiente comando:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_a9519bf76dc7487e845b066218eb8649-1"&gt;&lt;/a&gt;git init
&lt;/pre&gt;&lt;p&gt;Añadimos los archivos:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_9359f1c732774a5499867d4a6e3ed713-1"&gt;&lt;/a&gt;git add *
&lt;/pre&gt;&lt;p&gt;Y hacemos nuestro primer commit:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_4784e346f2594b43b218c22d03ae4504-1"&gt;&lt;/a&gt;git commit -m &lt;span class="s2"&gt;"Deployando proyecto"&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Creamos nuestro proyecto en Heroku:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_21e12f7bc6e74954a9fda45ce9bbee1c-1"&gt;&lt;/a&gt;heroku create volpox
&lt;/pre&gt;&lt;p&gt;Ahora si procedamos a subir nuestro proyecto a Heroku:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_7a6c81a8a5aa4da9bcad073d346fa992-1"&gt;&lt;/a&gt;git push heroku master
&lt;/pre&gt;&lt;p&gt;Si tuviesemos algún error, revisar los archivos de la carpeta static,
generalmente la mayoría de errores se presentan por rutas no
encontradas o cosas así.&lt;/p&gt;
&lt;p&gt;Si todo ha salido correctamente vamos a proceder a asegurarnos de que
al menos una instancia de la aplicación se está ejecutando:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_b6f0b9ba3670473b82e3707f079e3952-1"&gt;&lt;/a&gt;heroku ps:scale &lt;span class="nv"&gt;web&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1
&lt;/pre&gt;&lt;p&gt;Ahora abrimos el proyecto con el navegador por defecto:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_8a6b57fb13d24253b87dfda899798570-1"&gt;&lt;/a&gt;heroku open
&lt;/pre&gt;&lt;p&gt;Listo, ya tenemos nuestra aplicación funcionando correctamente, ahora
falta configurar la base de datos, para ello vamos a utilizar el
siguiente comando:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_1a8937946efd4bb5817a856a7a1a3578-1"&gt;&lt;/a&gt;heroku addons
&lt;/pre&gt;&lt;p&gt;Con esto añadimos una base de datos PostgreSQL en el plan Free de
nuestra cuenta.
Los siguiente comandos:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_9fe26a85020b44c69be07df535b4a0fb-1"&gt;&lt;/a&gt;heroku config
&lt;a name="rest_code_9fe26a85020b44c69be07df535b4a0fb-2"&gt;&lt;/a&gt;heroku pg
&lt;/pre&gt;&lt;p&gt;Nos permiten ver la configuración de nuestra base de datos.&lt;/p&gt;
&lt;p&gt;Procedemos a crear nuestras tablas en la base de datos creada, usando
el comando migrate de la siguiente manera:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_53579d22c6dd4f7cae7e57ec0c8d01be-1"&gt;&lt;/a&gt;heroku run python manage.py migrate
&lt;/pre&gt;&lt;p&gt;Si es necesario procedemos a crear nuestro superusuario:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_0f122c54c51a43849ae87b968e07fa9d-1"&gt;&lt;/a&gt;heroku run python manage.py createsuperuser
&lt;/pre&gt;&lt;p&gt;Listo ya tenemos nuestra aplicación desplegada. Hasta la próxima.&lt;/p&gt;&lt;/div&gt;</description><category>Django</category><category>Python</category><guid>http://pythonpiura.org/posts/2016/04/17/deployando-proyectos-django-en-heroku/</guid><pubDate>Sun, 17 Apr 2016 21:44:49 GMT</pubDate></item><item><title>Servir Aplicaciones Django con Apache y mod_wsgi en Centos 7</title><link>http://pythonpiura.org/posts/2016/04/14/servir-aplicaciones-django-con-apache-y-mod_wsgi-en-centos-7/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;Para instalar un servidor de producción Django en Centos 7 usaremos
Apache y mod_wsgi, mod_wsgi es un módulo de Apache, que permite servir
aplicaciones hechas en Python, que tengan soporte para la interfaz
WSGI.
Los requisitos para esto son tener un servidor Centos 7 correctamente
instalado y configurado y los permisos de root para poder hacer las
instalaciones correspondientes. Para comenzar el proceso, vamos a
descargar e instalar todos los elementos que necesitamos de los
repositorios de la distribución. Esto incluirá el servidor web Apache,
el módulo mod_wsgi utilizado para interactuar con nuestra aplicación
Django, y pip. Para obtener pip, tendremos que habilitar el
repositorio EPEL(paquetes para Linux Empresarial):&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_ed55c85b2b334c369cd6c938ef709421-1"&gt;&lt;/a&gt;yum install epel-release
&lt;/pre&gt;&lt;p&gt;Con EPEL habilitado nosotros podemos instalar los componentes
tipeando:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_94679e24e08949afb49b30450227bffe-1"&gt;&lt;/a&gt;yum install python-pip httpd mod_wsgi
&lt;/pre&gt;&lt;p&gt;Ahora que ya tenemos instalados los paquetes necesarios, debemos crear
un entorno virtual para ellos instalaremos virtualenv usando pip:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_d4fcb12bb1cc4b92a4b33e89c4cc0429-1"&gt;&lt;/a&gt;pip install virtualenv
&lt;/pre&gt;&lt;p&gt;Ahora procedemos a crear nuestro entorno virtual:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_556f593dc2f04fdda20cea2ac46d789f-1"&gt;&lt;/a&gt;virtualenv vproduccion
&lt;/pre&gt;&lt;p&gt;Y lo activamos:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_e69d85259dea4d8ea0af518bd427faa1-1"&gt;&lt;/a&gt;&lt;span class="nb"&gt;source&lt;/span&gt; vproduccion/bin/activate
&lt;/pre&gt;&lt;p&gt;Cuando activamos el entorno virtual nuestro prompt debe cambiar y
aparecer entre paréntesis el nombre del entorno virtual activado.
Una vez que esto ha sucedido debemos instalar Django:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_6a4d9cc9df864ee2bca755674ec1ce37-1"&gt;&lt;/a&gt;pip install django
&lt;/pre&gt;&lt;p&gt;Cuando ya tengamos listo esto, subimos o creamos nuestro proyecto
Django utilizando los comandos clásicos que ya hemos utilizado antes,
ahora nos toca configurar Apache.
Una vez que comprobamos que el proyecto Django está funcionando,
podemos configurar Apache como un front-end. Las conexiones de cliente
que recibe serán traducidos al formato WSGI que la aplicación Django
espera utilizando el módulo mod_wsgi. Esto debería haber sido activado
automáticamente después de la instalación anterior. Para configurar lo
anterior, tendremos que crear un nuevo archivo de configuración en el
directorio /etc/httpd/conf.d. Vamos a llamar a este archivo
django.conf:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_5b467e05630640bcb5c06dacdc22df8b-1"&gt;&lt;/a&gt;nano /etc/httpd/conf.d/django.conf
&lt;/pre&gt;&lt;p&gt;Y dentro de él escribiremos lo siguiente:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#En mi caso la ruta es /home/jamaya y mi proyecto se llama siad&lt;/span&gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Configuración para mostrar correctamente losa archivos estáticos&lt;/span&gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-3"&gt;&lt;/a&gt;Alias /static /home/jamaya/siad/static
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-4"&gt;&lt;/a&gt;&amp;lt;Directory /home/jamaya/siad/static&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-5"&gt;&lt;/a&gt;        Require all granted
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-6"&gt;&lt;/a&gt;&amp;lt;/Directory&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-7"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#Configuración para acceder correctamente al wsgi.py&lt;/span&gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-8"&gt;&lt;/a&gt;&amp;lt;Directory /home/jamaya/siad/siad/&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-9"&gt;&lt;/a&gt;        &amp;lt;Files wsgi.py&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-10"&gt;&lt;/a&gt;                Require all granted
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-11"&gt;&lt;/a&gt;        &amp;lt;/Files&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-12"&gt;&lt;/a&gt;&amp;lt;/Directory&amp;gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-14"&gt;&lt;/a&gt;WSGIDaemonProcess siad python-path&lt;span class="o"&gt;=&lt;/span&gt;/home/jamaya/siad:/home/jamaya/vproduccion/lib/python2.7/site-packages
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-15"&gt;&lt;/a&gt;WSGIProcessGroup siad
&lt;a name="rest_code_5aea15a1a6ff4e3c9b7b826b05e50a4a-16"&gt;&lt;/a&gt;WSGIScriptAlias /siad /home/jamaya/siad/siad/wsgi.py
&lt;/pre&gt;&lt;p&gt;A continuación, tenemos que arreglar los permisos para que el servicio
de Apache puede acceder a nuestros archivos. Por defecto CentOS
bloquea el directorio personal de cada usuario de manera muy
restrictiva. Para evitar esto, añadiremos el usuario apache al grupo
de nuestro propio usuario. Esto nos permitirá abrir los permisos sólo
lo suficiente para que pueda llegar a los archivos correspondientes.
Añadimos el usuario apache a nuestro grupo, reemplazamos la palabra
jamaya con nuestro usuario:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_7a4e94f4959e4f40b3ae62c3b756a1d4-1"&gt;&lt;/a&gt;usermod -a -G jamaya apache
&lt;/pre&gt;&lt;p&gt;Damos permisos al grupo en la carpeta personal, esto permitirá al
proceso apache acceder a los archivos.&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_731c7dcc4652446d95e7698da7e2a7d8-1"&gt;&lt;/a&gt;chmod &lt;span class="m"&gt;710&lt;/span&gt; /home/jamaya
&lt;/pre&gt;&lt;p&gt;Ya podemos iniciar el servicio de apache:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_abd3dbf1e5e743efabb8eabb7c3216e2-1"&gt;&lt;/a&gt;systemctl start httpd
&lt;/pre&gt;&lt;p&gt;Vamos a probar si la carga del proyecto funciona, vamos a otra
computadora de la red y colocamos la direccion ip de nuestro servidor
y la aplicación:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_1d8d98539f4d4e7cbbb4b18f48c25b87-1"&gt;&lt;/a&gt;http://172.20.30.129/siad
&lt;/pre&gt;&lt;p&gt;Si hubiese algún problema lo mas rápido y sencillo es deshabilitar
SELINUX, esto lo hacemos editando el archivo:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_0ac575a221aa47cbb1f58a597c222fd5-1"&gt;&lt;/a&gt;/etc/selinux/config
&lt;/pre&gt;&lt;p&gt;Y cambiando la siguiente linea:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_f7a73805211a43c6a16243c858f27bc8-1"&gt;&lt;/a&gt;&lt;span class="nv"&gt;SELINUX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;disabled
&lt;/pre&gt;&lt;p&gt;Si todo funciona correctamente habilitamos el servicio apache para que
se inicie automaticamente:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_310db2e786eb47d7be81de572d3a0613-1"&gt;&lt;/a&gt;systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; httpd
&lt;/pre&gt;&lt;p&gt;Recuerden tener siempre su archivo requerimientos.txt o
requirements.txt para instalar todas las dependendencias que hacen que
nuestro proyecto funcione con éxito. Este archivo se obtiene en
nuestro entorno de desarrollo escribiendo el siguiente comando:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_cc944d40218e418586bb220b9ea663ee-1"&gt;&lt;/a&gt;pip freeze &amp;gt; requirements.txt
&lt;/pre&gt;&lt;p&gt;Y para instalarlas en nuestro entorno de producción usamos el mismo
comando con algunas variantes:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_b8180f60af94468cb4e2255ebae6b38f-1"&gt;&lt;/a&gt;pip install -r requirements.txt
&lt;/pre&gt;&lt;p&gt;En el caso nuestro teniamos un par de dependencias un poco complicadas
de instalar en Centos: Pillow y psycopg2, por lo que tuvimos algunos
errores, para solucionarlos debemos instalar algunas librerias, en
centos en el caso de psycopg2 tenemos:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_1b810b42bed14a72851ff69a7401b26e-1"&gt;&lt;/a&gt;yum install gcc
&lt;a name="rest_code_1b810b42bed14a72851ff69a7401b26e-2"&gt;&lt;/a&gt;yum install postgresql-devel python-devel
&lt;/pre&gt;&lt;p&gt;Y en el caso de Pillow:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_0cafba1d541a407db19e0d1b422204e0-1"&gt;&lt;/a&gt;yum install libjpeg-devel zlib-devel
&lt;/pre&gt;&lt;p&gt;Y listo eso es todo, ya tenemos nuestro servidor de producción.&lt;/p&gt;
&lt;p&gt;Saludos.&lt;/p&gt;&lt;/div&gt;</description><category>Centos</category><category>Django</category><category>Python</category><guid>http://pythonpiura.org/posts/2016/04/14/servir-aplicaciones-django-con-apache-y-mod_wsgi-en-centos-7/</guid><pubDate>Fri, 15 Apr 2016 03:34:33 GMT</pubDate></item><item><title>Romper Captchas con Pytesseract y Selenium</title><link>http://pythonpiura.org/posts/2016/01/26/romper-captchas-con-pytesseract-y-selenium/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;div&gt;&lt;p&gt;En muchas de las páginas que consultamos tenemos una imagen que
contiene un pequeño texto que generalmente es de 4 o de 6 letras, esta
imagen es conocida como captcha y sirve para evitar la consulta masiva
de datos y el uso de boots para hacer consultas, el problema radica en
que podemos convertir esta imagen en texto y buscar la forma de
ingresar estos datos de manera automática sin intervención humana.
Para hacer la conversión de la imagen en texto tenemos la librería
pytesseract que hace uso del programa tesseract-ocr y para el ingreso
automático de datos y el acceso a la página objetivo contamos con la
ayuda de nuestro viejo conocido selenium, cabe destacar que este
procedimiento funciona siempre y cuando la imagen del captcha no sea
tan complejo y contenga solamente texto.
Hemos creado un script de manera general sin tener una página objetivo
en específico, pero para aplicarlo se debe conocer bien la página a
testear tal como hemos explicado en posts anteriores, analizando sus
elementos y la ubicación del captcha.
Antes de empezar debemos tener instalado el programa tesseract-ocr ya
que no podremos hacer nada sin este, lo podemos descargar de la
siguiente &lt;a class="reference external" href="http://en.osdn.jp/projects/sfnet_tesseract-ocr-alt/downloads/tesseract-ocr-setup-3.02.02.exe/"&gt;ubicación&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Posteriormente procedemos a instalar las librerias pytesseract y
pillow(para el manejo y tratamiento de imágenes)&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_42faaafe09434728a945aa3cb402d38f-1"&gt;&lt;/a&gt;pip install pillow
&lt;a name="rest_code_42faaafe09434728a945aa3cb402d38f-2"&gt;&lt;/a&gt;pip install pytesseract
&lt;/pre&gt;&lt;p&gt;Y finalmente hacemos nuestro script el cual está debidamente
documentado para que lo puedan adaptar y modificar a su gusto.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.common.by&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;By&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support.wait&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;selenium.webdriver.support&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;expected_conditions&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;EC&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-6"&gt;&lt;/a&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-8"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ImportError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-10"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;PIL&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-11"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pytesseract&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-13"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;ir_pagina_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cadena&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;direccion_web&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-14"&gt;&lt;/a&gt;    &lt;span class="n"&gt;driver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webdriver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Firefox&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-15"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Vamos a la dirección web de la página objetivo&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-16"&gt;&lt;/a&gt;    &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;direccion_web&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-17"&gt;&lt;/a&gt;    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-18"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Esperamos que se cargue correctamente la caja de texto de búsqueda&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-19"&gt;&lt;/a&gt;        &lt;span class="n"&gt;WebDriverWait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;until&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EC&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;presence_of_element_located&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;By&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"txtBusqueda"&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-20"&gt;&lt;/a&gt;    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-21"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"El elemento no está presente"&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-22"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Obtenemos la caja de texto de búsqueda&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-23"&gt;&lt;/a&gt;    &lt;span class="n"&gt;placa&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"txtBusqueda"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-24"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Enviamos la cadena a buscar en la caja de texto&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-25"&gt;&lt;/a&gt;    &lt;span class="n"&gt;placa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cadena&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-26"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Hacemos una captura de pantalla de la página objetivo&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-27"&gt;&lt;/a&gt;    &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save_screenshot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"screenshot.jpg"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-28"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Abrimos la captura hecha&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-29"&gt;&lt;/a&gt;    &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'screenshot.jpg'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-30"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Recortamos la captura de acuerdo a la ubicación del captcha.&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-31"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#El primer argumento es la posición "x" inicial, el segundo la posición "y" inicial.&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-32"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#El tercer argumento es la posición "x" final y el cuarto la posición "y" final.&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-33"&gt;&lt;/a&gt;    &lt;span class="n"&gt;img_recortada&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crop&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="mi"&gt;380&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;550&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;340&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-34"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Guardamos el área seleccionada con el nombre de "recorte.jpg"&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-35"&gt;&lt;/a&gt;    &lt;span class="n"&gt;img_recortada&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"recorte.jpg"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-36"&gt;&lt;/a&gt;    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-37"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Convertimos la imagen a cadena de texto usando la libreria pytesseract&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-38"&gt;&lt;/a&gt;        &lt;span class="n"&gt;captcha&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pytesseract&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;image_to_string&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;img_recortada&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-39"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Obtenemos la caja de texto donde se ingresa el contenido del captcha&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-40"&gt;&lt;/a&gt;        &lt;span class="n"&gt;codigo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"txtCaptcha"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-41"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;#Enviamos el captcha obtenido&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-42"&gt;&lt;/a&gt;        &lt;span class="n"&gt;codigo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_keys&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;captcha&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-43"&gt;&lt;/a&gt;    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-44"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Error al convertir imagen en texto"&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-45"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Obtenemos el botón buscar&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-46"&gt;&lt;/a&gt;    &lt;span class="n"&gt;boton&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;find_element_by_id&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"btn_buscar"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-47"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#Hacemos click en el botón&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-48"&gt;&lt;/a&gt;    &lt;span class="n"&gt;boton&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;click&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-49"&gt;&lt;/a&gt;    &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-50"&gt;&lt;/a&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-51"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-52"&gt;&lt;/a&gt;    &lt;span class="n"&gt;ir_pagina_web&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"cadena"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;"direccion_web"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-53"&gt;&lt;/a&gt;
&lt;a name="rest_code_5b71c93989bd4895af0aa65d73710f10-54"&gt;&lt;/a&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Por cierto hemos realizado esta prueba en Windows, nos queda la tarea
pendiente de hacerlo en GNU/Linux.&lt;/p&gt;&lt;/div&gt;</description><category>Python</category><category>Selenium</category><guid>http://pythonpiura.org/posts/2016/01/26/romper-captchas-con-pytesseract-y-selenium/</guid><pubDate>Tue, 26 Jan 2016 19:17:00 GMT</pubDate></item><item><title>Web Scraping con Selenium</title><link>http://pythonpiura.org/posts/2016/01/25/web-scraping-con-selenium/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p&gt;En entradas anteriores comentabamos sobre el uso de Selenium para hacer test, en esta oportunidad lo utilizaremos para extraer datos de una web en particular, ahora manos a la obra.&lt;br&gt;
Para hacer la extracción de datos primero necesitamos conocer bien la página web objetivo, en este caso es una página de consulta de datos de teléfonos de personas y empresas llamada “Páginas Blancas” su URL es la siguiente:&lt;br&gt;
http://www.paginasblancas.pe/&lt;/p&gt;
&lt;p&gt;Y también debemos conocer el modo de funcionamiento de la página en cuestión, en este caso se debe ingresar la cadena a buscar en una caja de texto y presionar un botón que dice “Buscar” para enviar la consulta, si hay datos coincidentes con el texto ingresado, la página nos mostrará una lista de resultados que contienen la razón social o nombre, la dirección y el teléfono:&lt;/p&gt;
&lt;p&gt;Búsqueda&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/01/busqueda.png" rel="attachment wp-att-89"&gt;&lt;img class="alignnone size-medium wp-image-89" src="https://pythonpiura.files.wordpress.com/2016/01/busqueda.png?w=300" alt="busqueda" width="300" height="102"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Resultados&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/01/resultados.png" rel="attachment wp-att-90"&gt;&lt;img class="alignnone size-medium wp-image-90" src="https://pythonpiura.files.wordpress.com/2016/01/resultados.png?w=300" alt="resultados" width="300" height="246"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nos ayudaremos con las herramientas que tiene Firefox para poder identificar los elementos HTML de la página objetivo:&lt;br&gt;
&lt;a href="http://pythonpiura.org/2016/01/herramientas.png" rel="attachment wp-att-86"&gt;&lt;img class="alignnone size-medium wp-image-86" src="https://pythonpiura.files.wordpress.com/2016/01/herramientas.png?w=300" alt="Herramientas" width="300" height="88"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Empezamos identificando la caja de texto donde se envían los datos a consultar:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/01/caja.png" rel="attachment wp-att-87"&gt;&lt;img class="alignnone size-medium wp-image-87" src="https://pythonpiura.files.wordpress.com/2016/01/caja.png?w=300" alt="caja" width="300" height="36"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Y el botón que ejecuta la consulta:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/01/boton.png" rel="attachment wp-att-88"&gt;&lt;img class="alignnone size-medium wp-image-88" src="https://pythonpiura.files.wordpress.com/2016/01/boton.png?w=300" alt="boton" width="300" height="23"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ahora que ya tenemos identificados estos elementos procedemos a escribir nuestro script en python:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;/p&gt;
&lt;p&gt;# -*- coding: utf-8 -*-&lt;br&gt;
from selenium import webdriver&lt;br&gt;
from selenium.webdriver.common.by import By&lt;br&gt;
from selenium.webdriver.support.wait import WebDriverWait&lt;br&gt;
from selenium.webdriver.support import expected_conditions as EC&lt;br&gt;
import os&lt;/p&gt;
&lt;p&gt;def ir_paginas_blancas_web(cadena):&lt;br&gt;
    driver = webdriver.Firefox()&lt;br&gt;
    #Página a la que queremos acceder&lt;br&gt;
    driver.get("http://www.paginasblancas.pe")&lt;br&gt;
    lista_datos = []&lt;br&gt;
    try:&lt;br&gt;
        #Verificamos si el elemento con ID="nName" ya está cargado, este elemento es la caja de texto donde se hacen las busquedas&lt;br&gt;
        WebDriverWait(driver, 5).until(EC.presence_of_element_located((By.ID, "nName")))&lt;br&gt;
        #Obtenemos la caja de texto de busquedas&lt;br&gt;
        input_nombre = driver.find_element_by_id("nName")&lt;br&gt;
        #Enviamos la cadena que estamos buscando&lt;br&gt;
        input_nombre.send_keys(cadena)&lt;br&gt;
        #Obtenemos el botón que ejecuta la búsqueda&lt;br&gt;
        boton = driver.find_element_by_id("btnSrchName")&lt;br&gt;
        #Damos click al botón&lt;br&gt;
        boton.click()&lt;br&gt;
    except:&lt;br&gt;
        #Mostramos este mensaje en caso de que se presente algún problema&lt;br&gt;
        print "El elemento no está presente"&lt;br&gt;
    try:&lt;br&gt;
        #Si se encuentran resultados la página los muestra en elementos de nombre "m-results-business"&lt;br&gt;
        #Para ello esperamos que estos elementos se carguen para proceder a consultarlos&lt;br&gt;
        WebDriverWait(driver, 5).until(EC.presence_of_all_elements_located((By.CLASS_NAME, "m-results-business")))&lt;br&gt;
    except:&lt;br&gt;
        print ‘Elementos no encontrados’&lt;br&gt;
    #Obtenemos en una lista los elementos encontrados&lt;br&gt;
    resultados = driver.find_elements_by_class_name("m-results-business")&lt;br&gt;
    for resultado in resultados:&lt;br&gt;
        #En cada uno de los elementos encontrados buscamos un elemento interno que tiene por nombre info&lt;br&gt;
        datos = resultado.find_element_by_class_name("info")&lt;br&gt;
        #Dentro del elemento interno encontrado buscamos aquellos elementos que son enlaces(etiqueta &amp;lt;a&amp;gt;)&lt;br&gt;
        nombre = datos.find_element_by_tag_name(‘a’)&lt;br&gt;
        #Comprobamos si la cadena que buscamos coincide con la razón social o el nombre mostrado por la página&lt;br&gt;
        if nombre.text.upper().find(cadena)&amp;lt;&amp;gt;-1 or cadena.find(nombre.text.upper())&amp;lt;&amp;gt;-1:&lt;br&gt;
            #Obtenemos la parte de la dirección&lt;br&gt;
            span = datos.find_elements_by_tag_name(‘span’)&lt;br&gt;
            direccion = span[2].text&lt;br&gt;
            partes_ubigeo = span[3].text.split(‘-’)&lt;br&gt;
            distrito = partes_ubigeo[0].strip()&lt;br&gt;
            try:&lt;br&gt;
                departamento = partes_ubigeo[1].strip()&lt;br&gt;
            except:&lt;br&gt;
                departamento = ‘-’&lt;br&gt;
        #Obtenemos los Datos telefonicos para ello debemos simular el click en el botón que dice "Ver Teléfono"&lt;br&gt;
        boton_telefono = resultado.find_element_by_class_name("m-button–results-business–icon")&lt;br&gt;
        boton_telefono.click()&lt;br&gt;
        #Obtenemos los teléfonos que se muestran como enlaces&lt;br&gt;
        enlaces = resultado.find_elements_by_tag_name(‘a’)&lt;br&gt;
        telefono = enlaces[1].text.replace(‘ ‘, ”)&lt;br&gt;
        #Finalmente metemos en una lista de listas los datos obtenidos&lt;br&gt;
        lista_datos.append([direccion,distrito,departamento,telefono])&lt;/p&gt;
&lt;p&gt;    driver.close()&lt;br&gt;
    return lista_datos&lt;/p&gt;
&lt;p&gt;def main():&lt;br&gt;
    print ir_paginas_blancas_web(‘UNIVERSIDAD DE LIMA’)&lt;/p&gt;
&lt;p&gt;main()&lt;/p&gt;
&lt;p&gt;[/sourcecode]&lt;/p&gt;
&lt;p&gt; &lt;/p&gt;
</description><category>Python</category><category>Selenium</category><guid>http://pythonpiura.org/posts/2016/01/25/web-scraping-con-selenium/</guid><pubDate>Tue, 26 Jan 2016 03:51:19 GMT</pubDate></item><item><title>Django y Microsoft SQL Server</title><link>http://pythonpiura.org/posts/2016/01/25/django-y-microsoft-sql-server/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p style="text-align:justify;"&gt;Si por algún oscuro motivo necesitas conectar Django con Microsoft SQL Server, la solución la tiene el proyecto django-pyodbc-azure la información completa sobre el proyecto la encontrarán en su web oficial:&lt;br&gt;
https://github.com/michiya/django-pyodbc-azure&lt;br&gt;
La última versión del proyecto soporta Django 1.9.1 y Microsoft SQL Server 2005,2008/2008R2,2012,2014.&lt;br&gt;
Para empezar a trabajar debemos instalar de la siguiente forma:&lt;br&gt;
pip install django-pyodbc-azure&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Y luego configurar el archivo settings de nuestro proyecto, en la parte relacionada a la conexión a las bases de datos:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
DATABASES = {&lt;br&gt;
    ‘default’: {&lt;br&gt;
        ‘ENGINE’: ‘sql_server.pyodbc’,&lt;br&gt;
        ‘NAME’: ‘NOMBRE_BD’,&lt;br&gt;
        ‘USER’: ‘usuario’,&lt;br&gt;
        ‘PASSWORD’: ‘password’,&lt;br&gt;
        ‘HOST’: ‘IP_SERVIDOR_SQL_SERVER’,&lt;br&gt;
        ‘PORT’: ”,&lt;br&gt;
        ‘OPTIONS’: {&lt;br&gt;
            ‘driver’: ‘SQL Server Native Client 10.0′,&lt;br&gt;
            }&lt;br&gt;
    },&lt;br&gt;
}&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Y listo eso es todo, si desean conocer un poco mas este excelente proyecto remitanse a su página web.&lt;br&gt;
Saludos.&lt;/p&gt;
</description><category>Django</category><category>Python</category><guid>http://pythonpiura.org/posts/2016/01/25/django-y-microsoft-sql-server/</guid><pubDate>Mon, 25 Jan 2016 20:38:02 GMT</pubDate></item><item><title>Obtener Módulos de un Proyecto y Vistas de una Aplicación en Django</title><link>http://pythonpiura.org/posts/2016/01/19/obtener-modulos-de-un-proyecto-y-vistas-de-una-aplicacion-en-django/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p&gt;Debido a un requerimiento en un proyecto necesitabamos tener una página donde administrar todas las aplicaciones que hemos creado en nuestro proyecto Django y poder revisar que vistas(views) tiene cada uno de estas aplicaciones, para ello creamos una aplicación llamada permisos y una vista llamada AplicacionesProyecto de la siguiente manera:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
class AplicacionesProyecto(View):&lt;/p&gt;
&lt;p&gt;def get(self, request, *args, **kwargs):&lt;br&gt;
    aplicaciones = [ app for app in miproyecto.settings.INSTALLED_APPS if not "django" in app ]&lt;br&gt;
    context={‘aplicaciones’:aplicaciones}&lt;br&gt;
    return render(request, ‘reporte_aplicaciones.html’,context)&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Nuestro template se llama reporte_aplicaciones.html y tiene la siguiente estructura:&lt;/p&gt;
&lt;p&gt;[sourcecode language="html"]&lt;br&gt;
{% extends "base_permisos.html" %}&lt;br&gt;
{% block titulo_opcion %}&lt;br&gt;
    Reporte de Aplicaciones&lt;br&gt;
{% endblock titulo_opcion %}&lt;br&gt;
{% block cuerpo_opcion %}&lt;br&gt;
&amp;lt;table class="table table-striped"&amp;gt;&lt;br&gt;
	&amp;lt;tbhead&amp;gt;&lt;br&gt;
		&amp;lt;tr&amp;gt;&lt;br&gt;
		&amp;lt;th&amp;gt;Nombre&amp;lt;/th&amp;gt;&lt;br&gt;
		&amp;lt;th&amp;gt;Vistas&amp;lt;/th&amp;gt;&lt;br&gt;
		&amp;lt;/tr&amp;gt;&lt;br&gt;
	&amp;lt;/tbhead&amp;gt;&lt;br&gt;
	&amp;lt;tbody&amp;gt;&lt;br&gt;
		{% for app in aplicaciones %}&lt;br&gt;
		&amp;lt;tr&amp;gt;&lt;br&gt;
			&amp;lt;td&amp;gt;{{ app }}&amp;lt;/td&amp;gt;&lt;br&gt;
			&amp;lt;td&amp;gt;&lt;br&gt;
				&amp;lt;a class="btn btn-small" href="{% url ‘permisos:reporte_vistas’ app %}"&amp;gt;&lt;br&gt;
					&amp;lt;span class="glyphicon glyphicon-folder-open"&amp;gt;&amp;lt;/span&amp;gt;&lt;br&gt;
				&amp;lt;/a&amp;gt;&lt;br&gt;
			&amp;lt;/td&amp;gt;&lt;br&gt;
		&amp;lt;/tr&amp;gt;&lt;br&gt;
		{% endfor %}&lt;br&gt;
	&amp;lt;/tbody&amp;gt;&lt;br&gt;
&amp;lt;/table&amp;gt;&lt;br&gt;
{% endblock cuerpo_opcion %}&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;La idea es obtener un listado de tal manera que al dar click en el enlace de cada uno de los módulos podamos ver las vistas(Views) que tiene cada una de las aplicaciones:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
class ReporteVistas(View):&lt;/p&gt;
&lt;p&gt;	def get(self, request, *args, **kwargs):&lt;br&gt;
		aplicacion = self.kwargs['aplicacion']&lt;br&gt;
		lista_clases = []&lt;br&gt;
		for nombre_modulo,instancia_modulo in inspect.getmembers(sys.modules[aplicacion]):&lt;br&gt;
			if nombre_modulo==’views’:&lt;br&gt;
				codigo_fuente = inspect.getsource(instancia_modulo)&lt;br&gt;
				codigo_fuente = codigo_fuente.replace(" ", "")&lt;br&gt;
				for miembro in dir(instancia_modulo):&lt;br&gt;
					obj = getattr(instancia_modulo, miembro)&lt;br&gt;
					if inspect.isclass(obj):&lt;br&gt;
						cadena_clase = ‘class’ + miembro&lt;br&gt;
						if codigo_fuente.find(cadena_clase)&amp;gt;=0:&lt;br&gt;
							lista_clases.append(miembro)&lt;br&gt;
		context={‘vistas’:lista_clases}&lt;br&gt;
		return render(request, ‘reporte_vistas_aplicacion.html’,context)&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Nuestro template es reporte_vistas_aplicacion.html y tiene el siguiente contenido:&lt;/p&gt;
&lt;p&gt;[sourcecode language="html"]&lt;br&gt;
{% extends "base_permisos.html" %}&lt;br&gt;
{% block titulo_opcion %}&lt;br&gt;
	Reporte de Vistas&lt;br&gt;
{% endblock titulo_opcion %}&lt;br&gt;
{% block cuerpo_opcion %}&lt;br&gt;
	{% for vista in vistas %}&lt;br&gt;
		{{ vista }}&lt;br&gt;
	{% endfor %}&lt;br&gt;
{% endblock cuerpo_opcion %}&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Los urls respectivos son de la siguiente manera, archivo urls.py:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
url(r’^aplicaciones_proyecto’, login_required(AplicacionesProyecto.as_view()), name="aplicaciones_proyecto"),&lt;br&gt;
url(r’^reporte_vistas/(?P&amp;lt;aplicacion&amp;gt;.+)/$’, login_required(ReporteVistas.as_view()), name="reporte_vistas"),&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Así de esta manera tenemos un procedimiento un tanto rudimentario pero útil con el que obtenemos, las aplicaciones de nuestro proyecto y las vistas de cada una de ellas.&lt;br&gt;
Hasta la próxima.&lt;/p&gt;
</description><category>Django</category><category>Python</category><guid>http://pythonpiura.org/posts/2016/01/19/obtener-modulos-de-un-proyecto-y-vistas-de-una-aplicacion-en-django/</guid><pubDate>Wed, 20 Jan 2016 03:53:56 GMT</pubDate></item><item><title>Selenium con Python</title><link>http://pythonpiura.org/posts/2014/09/18/selenium-con-python/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p style="text-align:justify;"&gt;Buenas noches estimados amigos en esta oportunidad vamos a trabajar con Selenium, esta excelente herramienta que nos permite testear nuestras aplicaciones web actuando como si lo hiciera un usuario final que interactúa con nuestra aplicación, la primera vez que la probé me sorprendí gratamente porque no sabía de la existencia de una herramienta tan interesante, bueno manos a la obra, para instalar selenium con Python debemos usar nuestra querida herramienta pip de la siguiente manera:&lt;/p&gt;
&lt;p&gt;[sourcecode language="bash"]&lt;br&gt;
    sudo pip install selenium&lt;br&gt;
[/sourcecode]&lt;br&gt;
Si tuviésemos configurado un entorno virtual simplemente trabajaríamos así:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
    pip install selenium&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Con esto ya tendremos instalada esta excelente aplicación, si por algún motivo tuviesen algún error o ya tuviesen instalado selenium y quieren actualizarlo deben poner lo siguiente en su terminal:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
    pip install selenium –upgrade&lt;br&gt;
[/sourcecode]&lt;br&gt;
Para probar su funcionamiento debemos tipear este ejemplo bastante simple:&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
    #Importamos el módulo webdriver que nos permite interactuar con nuestro navegador&lt;br&gt;
    from selenium import webdriver&lt;br&gt;
    #Importamos la clase Keys que provee las teclas RETURN, F1, ALT, etc de nuestro teclado&lt;br&gt;
    from selenium.webdriver.common.keys import Keys&lt;br&gt;
    #Creamos una instancia de Firefox webdriver para poder usar el navegador firefox en esta prueba&lt;br&gt;
    driver = webdriver.Firefox()&lt;br&gt;
    #El método get permite navegar hacia un enlace determinado en este caso la página de Python.org&lt;br&gt;
    #WebDriver esperará hasta que la página esté cargada&lt;br&gt;
    driver.get("http://www.python.org")&lt;br&gt;
    #En esta línea confirmaremos si el título tiene la palabra Python&lt;br&gt;
    assert "Python" in driver.title&lt;br&gt;
    #WebDriver ofrece varias maneras de encontrar los elementos de una página web&lt;br&gt;
    #En este ejemplo queremos encontrar el elemento que tenga como atributo name la letra "q"(es la barra de busqueda de la página)&lt;br&gt;
    elem = driver.find_element_by_name("q")&lt;br&gt;
    #Como ya localizamos el elemento y sabemos que es una caja de texto, vamos a escribir en ella la palabra "selenium"&lt;br&gt;
    elem.send_keys("selenium")&lt;br&gt;
    #Y finalmente enviaremos la busqueda pulsando la tecla RETURN&lt;br&gt;
    elem.send_keys(Keys.RETURN)&lt;br&gt;
    #Cerramos el navegador&lt;br&gt;
    driver.close()&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Verán que cuando ejecuten el script demorará un poquito pero nos mostrará una ventana de Firefox, posteriormente cargará la página de Python.org y en la caja de busqueda escribirá la palabra “selenium” para finalmente cerrar el navegador que había abierto culminando la ejecución del script.&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Esperemos que este pequeño post sea de gran utilidad para ustedes queridos lectores y si tuviesen algún problema al ejecutar el script por favor nos avisan.&lt;/p&gt;
&lt;p&gt;Saludos.&lt;/p&gt;
</description><category>Python</category><category>Selenium</category><guid>http://pythonpiura.org/posts/2014/09/18/selenium-con-python/</guid><pubDate>Thu, 18 Sep 2014 06:15:18 GMT</pubDate></item></channel></rss>