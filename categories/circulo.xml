<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python Piura (Círculo)</title><link>http://pythonpiura.org/</link><description></description><atom:link href="http://pythonpiura.org/categories/circulo.xml" type="application/rss+xml" rel="self"></atom:link><language>es</language><lastBuildDate>Mon, 01 Aug 2016 21:20:59 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Fotos Charla Web Scrapping con Python y Selenium</title><link>http://pythonpiura.org/posts/2016/05/09/fotos-charla-web-scrapping-con-python-y-selenium/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;span&gt;&lt;img alt="/images/blog/p5070212.jpg" src="http://pythonpiura.org/images/blog/p5070212.jpg"&gt;
&lt;img alt="/images/blog/p5070204.jpg" src="http://pythonpiura.org/images/blog/p5070204.jpg"&gt;
&lt;img alt="/images/blog/p5070208.jpg" src="http://pythonpiura.org/images/blog/p5070208.jpg"&gt;
&lt;img alt="/images/blog/p5070209.jpg" src="http://pythonpiura.org/images/blog/p5070209.jpg"&gt;
&lt;img alt="/images/blog/p5070210.jpg" src="http://pythonpiura.org/images/blog/p5070210.jpg"&gt;
&lt;img alt="/images/blog/p5070211.jpg" src="http://pythonpiura.org/images/blog/p5070211.jpg"&gt;&lt;/span&gt;</description><category>Círculo</category><guid>http://pythonpiura.org/posts/2016/05/09/fotos-charla-web-scrapping-con-python-y-selenium/</guid><pubDate>Mon, 09 May 2016 20:52:18 GMT</pubDate></item><item><title>Personalizando Permisos</title><link>http://pythonpiura.org/posts/2016/05/02/personalizando-permisos/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p style="text-align:justify;"&gt;Hasta ahora hemos trabajado con los permisos básicos que nos proporciona Django de manera automática, pero que pasa si nosotros quisieramos restringir cosas mas al detalle, por ejemplo que un usuario determinado no vea el detalle de la persona, o la tabla que lista a todas las personas, o que no pueda exportar a una hoja de cálculo.&lt;br&gt;
Empecemos por lo mas sencillo, creemos un permiso para restringir el acceso al detalle de la persona, para ello personalizaremos los permisos en el modelo, de la siguiente manera:&lt;/p&gt;
&lt;p&gt;models.py&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
from django.db import models&lt;/p&gt;
&lt;p&gt;# Create your models here.&lt;br&gt;
class Persona(models.Model):&lt;br&gt;
    dni= models.CharField(primary_key=True,max_length=8)&lt;br&gt;
    nombre = models.CharField(max_length=100)&lt;br&gt;
    apellido_paterno = models.CharField(max_length=100)&lt;br&gt;
    apellido_materno = models.CharField(max_length=100) &lt;/p&gt;
&lt;p&gt;    class Meta:&lt;br&gt;
        permissions = ((‘ver_detalle_persona’, ‘Puede ver detalle Persona’),)&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Veamos que hay de nuevo en nuestro modelo y lo primero que salta a la vista es el uso de una &lt;a href="https://datafull.co/p/que-es-una-metaclase-en-python"&gt;metaclase&lt;/a&gt; aquí definiremos el atributo permissions que es una tupla donde se definiran los múltiples permisos personalizados que podemos crear en este caso tenemos el par (‘ver_detalle_persona’, ‘Puede ver detalle Persona’) donde ‘ver_detalle_persona’ es el nombre del permiso y ‘Puede ver detalle Persona’ es una especie de descripción de lo que significa ese permiso, ahora ya lo tenemos listo, pero no podemos aplicarlo directamente sino que primero tenemos que hacer la migración correspondiente a la base de datos, ya que ha ocurrido una modificación del modelo:&lt;/p&gt;
&lt;p&gt;[sourcecode language="bash"]&lt;br&gt;
python manage.py makemigrations personas&lt;br&gt;
python manage.py migrate&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Ya con esto podemos usar el permiso, para ello modificaremos el archivo personas.html:&lt;/p&gt;
&lt;p&gt;[sourcecode language="html"]&lt;br&gt;
{% if perms.personas.ver_detalle_persona %}&lt;br&gt;
&amp;lt;a class="btn btn-small" href="{% url ‘personas:detalle_persona’ persona.pk %}"&amp;gt;&lt;br&gt;
	&amp;lt;span class="glyphicon glyphicon-folder-open"&amp;gt;&amp;lt;/span&amp;gt;&lt;br&gt;
&amp;lt;/a&amp;gt;&lt;br&gt;
{% endif %}&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Ahora nos logueamos con cualquiera de los usuarios nuevos que creamos en la sesión pasada, en este caso lo haremos con usuario1:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/05/sin_permiso_ver_persona.jpg"&gt;&lt;img class="aligncenter size-large wp-image-247" src="https://pythonpiura.files.wordpress.com/2016/05/sin_permiso_ver_persona.jpg?w=604" alt="sin_permiso_ver_persona" width="604" height="208"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Y vemos que no aparece el ícono del libro por lo tanto aparentemente no podemos acceder al detalle de la persona, pero igual que la vez pasada si es posible acceder a través de la url:&lt;/p&gt;
&lt;p&gt;http://localhost:8000/personas/detalle_persona/44626821/&lt;/p&gt;
&lt;p&gt;Nos falta hacer lo mismo de antes en nuestra vista DetallePersona:&lt;/p&gt;
&lt;p&gt;views.py&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
class DetallePersona(DetailView):&lt;br&gt;
    model = Persona&lt;br&gt;
    template_name = ‘detalle_persona.html’&lt;/p&gt;
&lt;p&gt;    @method_decorator(permission_required(‘personas.ver_detalle_persona’,reverse_lazy(‘personas:personas’)))&lt;br&gt;
    def dispatch(self, *args, **kwargs):&lt;br&gt;
        return super(DetallePersona, self).dispatch(*args, **kwargs)&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Listo ya con esto el usuario no puede ingresar al detalle de la persona y es inmediatamente redireccionado a la tabla de personas, ahora otorguemosle permisos al usuario1 a través de la interfaz de administración:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/05/permiso_ver_detalle_persona.jpg"&gt;&lt;img class="aligncenter size-large wp-image-248" src="https://pythonpiura.files.wordpress.com/2016/05/permiso_ver_detalle_persona.jpg?w=604" alt="permiso_ver_detalle_persona" width="604" height="156"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Damos click en la flecha y guardamos la modificación, ahora ingresemos a la aplicación personas con el usuario1 y nos debe salir una pantalla como la siguiente:&lt;br&gt;
&lt;a href="http://pythonpiura.org/2016/05/con_permiso_ver_persona.jpg"&gt;&lt;img class="aligncenter size-large wp-image-249" src="https://pythonpiura.files.wordpress.com/2016/05/con_permiso_ver_persona.jpg?w=604" alt="con_permiso_ver_persona" width="604" height="205"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Eso es todo por hoy, en un proximo post terminaremos de personalizar el resto de permisos y hacerle algunas modificaciones estéticas a nuestro proyecto.&lt;br&gt;
Saludos.&lt;/p&gt;
</description><category>Círculo</category><guid>http://pythonpiura.org/posts/2016/05/02/personalizando-permisos/</guid><pubDate>Tue, 03 May 2016 02:13:53 GMT</pubDate></item><item><title>Mejorando Nuestro Login</title><link>http://pythonpiura.org/posts/2016/04/28/mejorando-nuestro-login/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p style="text-align:justify;"&gt;Este es un post pequeñito donde vamos a demostrar como mejorar nuestro login que se ve un poco feo, para ello debemos crear un módulo de Python llamado forms.py en nuestra aplicación seguridad:&lt;br&gt;
&lt;a href="http://pythonpiura.org/2016/04/forms.jpg"&gt;&lt;img class="aligncenter size-full wp-image-211" src="http://pythonpiura.org/2016/04/forms.jpg" alt="forms" width="237" height="201"&gt;&lt;/a&gt;&lt;br&gt;
Ahora vamos a crear una clase llamada FormularioLogin que va a heredar de AuthenticationForm, la herencia en Python se determina poniendo la clase de la que se va a heredar entre parentesis en la definición de la clase hija:&lt;/p&gt;
&lt;p&gt;forms.py&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
from django.contrib.auth.forms import AuthenticationForm&lt;/p&gt;
&lt;p&gt;class FormularioLogin(AuthenticationForm):&lt;br&gt;
    def __init__(self, *args, **kwargs):&lt;br&gt;
        super(FormularioLogin, self).__init__(*args, **kwargs)&lt;br&gt;
        self.fields['username'].widget.attrs['class'] = ‘form-control’&lt;br&gt;
        self.fields['username'].widget.attrs['placeholder'] = ‘Usuario’&lt;br&gt;
        self.fields['password'].widget.attrs['class'] = ‘form-control’&lt;br&gt;
        self.fields['password'].widget.attrs['placeholder'] = ‘Contraseña’&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;¿Que cosa hemos hecho aquí?, sencillo hemos sobreescrito el comportamiento de los campos del formulario AuthenticationForm, expliquemos esto: primero se necesita acceder a cada uno de los campos del formulario, estos son ‘username’ y ‘password’, y se accede a ellos a través de la lista “fields”, luego accederemos a los widgets de cada uno de estos campos, el widget es el elemento o etiqueta html que se dibuja en el navegador, en este caso los dos son “input”, al ser elementos html tienen atributos y cada atributo tiene un valor, en este caso vamos a modificar los atributos “class” y “placeholder”, el atributo class establece la clase CSS que se aplica a los estilos del elemento y el atributo placeholder provee una ayuda a los usuarios para indicar que cosa se debe escribir en las cajas de texto. Hemos aplicado la clase &lt;a href="http://librosweb.es/libro/bootstrap_3/capitulo_5/campos_de_formulario.html"&gt;form-control&lt;/a&gt; de bootstrap, que sirve para mostrar los elementos de un formulario mejor presentados, a ambos elementos y hemos definido la ayuda que aparecerá en cada caja de texto.&lt;/p&gt;
&lt;p style="text-align:justify;"&gt;Recordemos que en nuestra vista Login el atributo form_class es AuthenticationForm, ahora esto va a cambiar:&lt;/p&gt;
&lt;p&gt;views.py&lt;/p&gt;
&lt;p&gt;[sourcecode language="python"]&lt;br&gt;
from seguridad.forms import FormularioLogin&lt;/p&gt;
&lt;p&gt;# Create your views here.&lt;br&gt;
class Login(FormView):&lt;br&gt;
    template_name = ‘login.html’&lt;br&gt;
    form_class = FormularioLogin&lt;br&gt;
    success_url =  reverse_lazy("personas:bienvenida")&lt;/p&gt;
&lt;p&gt;    def dispatch(self, request, *args, **kwargs):&lt;br&gt;
        if request.user.is_authenticated():&lt;br&gt;
            return HttpResponseRedirect(self.get_success_url())&lt;br&gt;
        else:&lt;br&gt;
            return super(Login, self).dispatch(request, *args, **kwargs)&lt;/p&gt;
&lt;p&gt;    def form_valid(self, form):&lt;br&gt;
        login(self.request, form.get_user())&lt;br&gt;
        return super(Login, self).form_valid(form)&lt;br&gt;
[/sourcecode]&lt;/p&gt;
&lt;p&gt;Finalmente tendremos la siguiente presentación:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://pythonpiura.org/2016/04/login_bonito.jpg"&gt;&lt;img class="aligncenter wp-image-212" src="https://pythonpiura.files.wordpress.com/2016/04/login_bonito.jpg?w=300" alt="login_bonito" width="519" height="175"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;¿Mejor, verdad?, eso es todo por hoy.&lt;/p&gt;
&lt;p&gt;Saludos.&lt;/p&gt;
</description><category>Círculo</category><guid>http://pythonpiura.org/posts/2016/04/28/mejorando-nuestro-login/</guid><pubDate>Fri, 29 Apr 2016 01:50:59 GMT</pubDate></item><item><title>Curso Básico de Python</title><link>http://pythonpiura.org/posts/2016/04/16/curso-basico-de-python/</link><dc:creator>Comunidad Python Piura</dc:creator><description>&lt;p&gt;[polldaddy poll=9387861]&lt;/p&gt;
</description><category>Círculo</category><guid>http://pythonpiura.org/posts/2016/04/16/curso-basico-de-python/</guid><pubDate>Sat, 16 Apr 2016 19:52:19 GMT</pubDate></item></channel></rss>